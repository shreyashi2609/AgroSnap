"""A Streamlit app for analyzing crop images using the Gemini Vision API."""
import streamlit as st
import time
from PIL import Image
import google.generativeai as genai
import requests
import json
import os
from streamlit_pills import pills
from dotenv import load_dotenv
import plotly.graph_objects as go
import plotly.express as px
import pandas as pd
from datetime import datetime, timedelta
import random
import streamlit.components.v1 as components
import re
import math
from streamlit_geolocation import streamlit_geolocation

# Set page config first
st.set_page_config(
    page_title="AgroSnap - Farmer's AI Assistant",
    page_icon="ЁЯМ▒",
    layout="wide",
    initial_sidebar_state="collapsed"
)

# Load environment variables
load_dotenv()
GOOGLE_API_KEY = os.getenv("GOOGLE_API_KEY")
DATA_GOV_IN_API_KEY = os.getenv("DATA_GOV_IN_API_KEY")
GOOGLE_MAPS_API_KEY = os.getenv("GOOGLE_MAPS_API_KEY")
OPENWEATHERMAP_API_KEY = os.getenv("OPENWEATHERMAP_API_KEY")

# Configure the Google API key
genai.configure(api_key=GOOGLE_API_KEY)

# --- Complete Translation Dictionary ---
TRANSLATIONS = {
    "page_title": {
        "English": "AgroSnap - Farmer's AI Assistant",
        "Hindi": "рдПрдЧреНрд░реЛрд╕реНрдиреИрдк - рдХрд┐рд╕рд╛рди рдХрд╛ рдПрдЖрдИ рд╕рд╣рд╛рдпрдХ",
        "Marathi": "рдЕрдЧреНрд░реЛрд╕реНрдиреЕрдк - рд╢реЗрддрдХрд▒реНрдпрд╛рдВрдЪрд╛ рдПрдЖрдп рд╕рд╣рд╛рдпреНрдпрдХ",
        "Telugu": "р░Ер░Чр▒Нр░░р▒Лр░╕р▒Нр░ир░╛р░кр▒Н - р░░р▒Ир░др▒Бр░▓р░Хр▒Б AI р░╕р░╣р░╛р░пр░Хр▒Бр░бр▒Б",
        "Tamil": "роЕроХрпНро░рпЛро╕рпНройро╛рокрпН - ро╡ро┐ро╡роЪро╛ропро┐ропро┐ройрпН AI роЙродро╡ро┐ропро╛ро│ро░рпН"
    },
    "app_name": {
        "English": "AgroSnap",
        "Hindi": "рдПрдЧреНрд░реЛрд╕реНрдиреИрдк",
        "Marathi": "рдЕрдЧреНрд░реЛрд╕реНрдиреЕрдк",
        "Telugu": "р░Ер░Чр▒Нр░░р▒Лр░╕р▒Нр░ир░╛р░кр▒Н",
        "Tamil": "роЕроХрпНро░рпЛро╕рпНройро╛рокрпН"
    },
    "app_slogan_1": {
        "English": "Your AI-powered farming assistant for the future",
        "Hindi": "рднрд╡рд┐рд╖реНрдп рдХреЗ рд▓рд┐рдП рдЖрдкрдХрд╛ рдПрдЖрдИ-рд╕рдВрдЪрд╛рд▓рд┐рдд рдХреГрд╖рд┐ рд╕рд╣рд╛рдпрдХ",
        "Marathi": "рднрд╡рд┐рд╖реНрдпрд╛рд╕рд╛рдареА рддреБрдордЪрд╛ рдПрдЖрдп-рд╢рдХреНрддреА рдЕрд╕рд▓реЗрд▓рд╛ рдХреГрд╖реА рд╕рд╣рд╛рдпреНрдпрдХ",
        "Telugu": "р░нр░╡р░┐р░╖р▒Нр░пр░др▒Нр░др▒Б р░Хр▒Лр░╕р░В р░ор▒А AI-р░Жр░зр░╛р░░р░┐р░д р░╡р▒Нр░пр░╡р░╕р░╛р░п р░╕р░╣р░╛р░пр░Хр▒Бр░бр▒Б",
        "Tamil": "роОродро┐ро░рпНроХро╛ро▓родрпНродро┐ро▒рпНроХро╛рой роЙроЩрпНроХро│рпН AI-роЙродро╡ро┐ропро╛ро│ро░рпН ро╡ро┐ро╡роЪро╛ропроорпН"
    },
    "app_slogan_2": {
        "English": "Powered by Google Gemini AI тАв Real-time Analysis тАв Multi-language Support",
        "Hindi": "рдЧреВрдЧрд▓ рдЬреЗрдорд┐рдиреА рдПрдЖрдИ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд тАв рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рд╡рд┐рд╢реНрд▓реЗрд╖рдг тАв рдмрд╣реБ-рднрд╛рд╖рд╛ рд╕рдорд░реНрдерди",
        "Marathi": "рдЧреБрдЧрд▓ рдЬреЗрдорд┐рдиреА рдПрдЖрдп рджреНрд╡рд╛рд░реЗ рд╕рдорд░реНрдерд┐рдд тАв рд╡рд╛рд╕реНрддрд╡рд┐рдХ-рд╡реЗрд│ рд╡рд┐рд╢реНрд▓реЗрд╖рдг тАв рдмрд╣реБ-рднрд╛рд╖рд╛ рд╕рдорд░реНрдерди",
        "Telugu": "Google Gemini AI р░жр▒Нр░╡р░╛р░░р░╛ р░Жр░зр░╛р░░р░┐р░др░В тАв р░ир░┐р░Ь-р░╕р░ор░п р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г тАв р░мр░╣р▒Бр░│-р░нр░╛р░╖р░╛ р░ор░жр▒Нр░жр░др▒Б",
        "Tamil": "Google Gemini AI роЖро▓рпН роЗропроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ тАв роиро┐роХро┤рпНроирпЗро░ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ тАв рокро▓ роорпКро┤ро┐ роЖродро░ро╡рпБ"
    },
    "tab_upload": {
        "English": "Upload & Analyze",
        "Hindi": "рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ",
        "Marathi": "рдЕрдкрд▓реЛрдб рдЖрдгрд┐ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рд╛",
        "Telugu": "р░Ер░кр▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░╕р░┐ р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░┐р░Вр░Ър░Вр░бр░┐",
        "Tamil": "рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН рооро▒рпНро▒рпБроорпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропро╡рпБроорпН"
    },
    "tab_results": {
        "English": "Analysis Results",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░рд┐рдгрд╛рдо",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░рд┐рдгрд╛рдо",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░лр░▓р░┐р░др░╛р░▓р▒Б",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роорпБроЯро┐ро╡рпБроХро│рпН"
    },
    "tab_prices": {
        "English": "Market Prices",
        "Hindi": "рдмрд╛рдЬрд╛рд░ рднрд╛рд╡",
        "Marathi": "рдмрд╛рдЬрд╛рд░ рднрд╛рд╡",
        "Telugu": "р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░зр░░р░▓р▒Б",
        "Tamil": "роЪроирпНродрпИ ро╡ро┐ро▓рпИроХро│рпН"
    },
    "tab_mandi": {
        "English": "Nearest Mandi",
        "Hindi": "рдирд┐рдХрдЯрддрдо рдордВрдбреА",
        "Marathi": "рдЬрд╡рд│рдЪреА рдордВрдбреА",
        "Telugu": "р░жр░Чр▒Нр░Чр░░р░▓р▒Лр░ир░┐ р░ор░Вр░бр░┐",
        "Tamil": "роЕро░рпБроХро┐ро▓рпБро│рпНро│ роорогрпНроЯро┐"
    },
    "tab_alerts": {
        "English": "Predictive Disease Alerts",
        "Hindi": "рднрд╡рд┐рд╖реНрдпрд╕реВрдЪрдХ рд░реЛрдЧ рдЕрд▓рд░реНрдЯ",
        "Marathi": "рднрд╡рд┐рд╖реНрдпрд╕реВрдЪрдХ рд░реЛрдЧ рдЕрд▓рд░реНрдЯ",
        "Telugu": "р░Ер░Вр░Ър░ир░╛ р░╡р▒Нр░пр░╛р░зр░┐ р░╣р▒Жр░Ър▒Нр░Ър░░р░┐р░Хр░▓р▒Б",
        "Tamil": "роорпБройрпНроХрпВроЯрпНроЯро┐роп роирпЛропрпН ро╡ро┐ро┤ро┐рокрпНрокрпВроЯрпНроЯро▓рпНроХро│рпН"
    },
    "select_language": {
        "English": "Choose Language",
        "Hindi": "рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ",
        "Marathi": "рднрд╛рд╖рд╛ рдирд┐рд╡рдбрд╛",
        "Telugu": "р░нр░╛р░╖р░ир▒Б р░Ор░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐",
        "Tamil": "роорпКро┤ро┐ропрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН"
    },
    "upload_image": {
        "English": "Upload Your Crop Image",
        "Hindi": "рдЕрдкрдиреА рдлрд╕рд▓ рдХреА рдлреЛрдЯреЛ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ",
        "Marathi": "рддреБрдордЪреНрдпрд╛ рдкрд┐рдХрд╛рдЪреЗ рдЪрд┐рддреНрд░ рдЕрдкрд▓реЛрдб рдХрд░рд╛",
        "Telugu": "р░ор▒А р░кр░Вр░Я р░Ър░┐р░др▒Нр░░р░╛р░ир▒Нр░ир░┐ р░Ер░кр▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "роЙроЩрпНроХро│рпН рокропро┐ро░рпН рокроЯродрпНродрпИрокрпН рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН"
    },
    "choose_file": {
        "English": "Choose an image file",
        "Hindi": "рдПрдХ рдЫрд╡рд┐ рдлрд╝рд╛рдЗрд▓ рдЪреБрдиреЗрдВ",
        "Marathi": "рдПрдХ рдЗрдореЗрдЬ рдлрд╛рдЗрд▓ рдирд┐рд╡рдбрд╛",
        "Telugu": "р░Тр░Х р░Ър░┐р░др▒Нр░░р░╛р░ир▒Нр░ир░┐ р░Ор░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐",
        "Tamil": "роТро░рпБ рокроЯ роХрпЛрокрпНрокрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН"
    },
    "uploader_help": {
        "English": "Upload clear images of crops for best analysis results",
        "Hindi": "рд╕рд░реНрд╡реЛрддреНрддрдо рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рд▓рд┐рдП рдлрд╕рд▓реЛрдВ рдХреА рд╕реНрдкрд╖реНрдЯ рддрд╕реНрд╡реАрд░реЗрдВ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ",
        "Marathi": "рдЙрддреНрддрдо рд╡рд┐рд╢реНрд▓реЗрд╖рдгрд╛рд╕рд╛рдареА рдкрд┐рдХрд╛рдЪреА рд╕реНрдкрд╖реНрдЯ рдЪрд┐рддреНрд░реЗ рдЕрдкрд▓реЛрдб рдХрд░рд╛",
        "Telugu": "р░Йр░др▒Нр░др░о р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░лр░▓р░┐р░др░╛р░▓ р░Хр▒Лр░╕р░В р░╕р▒Нр░кр░╖р▒Нр░Яр░ор▒Ир░и р░кр░Вр░Я р░Ър░┐р░др▒Нр░░р░╛р░▓р░ир▒Б р░Ер░кр▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "роЪро┐ро▒роирпНрод рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роорпБроЯро┐ро╡рпБроХро│рпБроХрпНроХрпБ рокропро┐ро░рпНроХро│ро┐ройрпН родрпЖро│ро┐ро╡ро╛рой рокроЯроЩрпНроХро│рпИ рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН"
    },
    "processing_options": {
        "English": "Processing Options",
        "Hindi": "рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рд╡рд┐рдХрд▓реНрдк",
        "Marathi": "рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкрд░реНрдпрд╛рдп",
        "Telugu": "р░кр▒Нр░░р░╛р░╕р▒Жр░╕р░┐р░Вр░Чр▒Н р░Ор░Вр░кр░┐р░Хр░▓р▒Б",
        "Tamil": "роЪрпЖропро▓ро╛роХрпНроХ ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпН"
    },
    "enhance_image": {
        "English": "Enhance image quality",
        "Hindi": "рдЫрд╡рд┐ рдЧреБрдгрд╡рддреНрддрд╛ рдмрдврд╝рд╛рдПрдБ",
        "Marathi": "рдЗрдореЗрдЬрдЪреА рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд╛рдврд╡рд╛",
        "Telugu": "р░Ър░┐р░др▒Нр░░ р░ир░╛р░гр▒Нр░пр░др░ир▒Б р░ор▒Жр░░р▒Бр░Чр▒Бр░кр░░р░Ър░Вр░бр░┐",
        "Tamil": "рокроЯродрпНродро┐ройрпН родро░родрпНродрпИ роорпЗроорпНрокроЯрпБродрпНродро╡рпБроорпН"
    },
    "detailed_analysis": {
        "English": "Detailed analysis",
        "Hindi": "рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг",
        "Marathi": "рд╕рдЦреЛрд▓ рд╡рд┐рд╢реНрд▓реЗрд╖рдг",
        "Telugu": "р░╡р░┐р░╡р░░р░гр░╛р░др▒Нр░ор░Х р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г",
        "Tamil": "ро╡ро┐ро░ро┐ро╡ро╛рой рокроХрпБрокрпНрокро╛ропрпНро╡рпБ"
    },
    "analyze_button": {
        "English": "Analyze Crop",
        "Hindi": "рдлрд╕рд▓ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ",
        "Marathi": "рдкрд┐рдХрд╛рдЪреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рд╛",
        "Telugu": "р░кр░Вр░Яр░ир▒Б р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░┐р░Вр░Ър░Вр░бр░┐",
        "Tamil": "рокропро┐ро░рпИрокрпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропро╡рпБроорпН"
    },
    "analyze_help": {
        "English": "Click to start AI-powered crop analysis",
        "Hindi": "рдПрдЖрдИ-рд╕рдВрдЪрд╛рд▓рд┐рдд рдлрд╕рд▓ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ",
        "Marathi": "рдПрдЖрдп-рдЪрд╛рд▓рд┐рдд рдкреАрдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╕реБрд░реВ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХреНрд▓рд┐рдХ рдХрд░рд╛",
        "Telugu": "AI-р░Жр░зр░╛р░░р░┐р░д р░кр░Вр░Я р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░гр░ир▒Б р░кр▒Нр░░р░╛р░░р░Вр░нр░┐р░Вр░Ър░бр░╛р░ир░┐р░Хр░┐ р░Хр▒Нр░▓р░┐р░Хр▒Н р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "AI-роЙродро╡ро┐ропрпБроЯройрпН рокропро┐ро░рпН рокроХрпБрокрпНрокро╛ропрпНро╡рпИродрпН родрпКроЯроЩрпНроХ роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН"
    },
    "upload_to_begin": {
        "English": "Please upload an image to begin analysis",
        "Hindi": "рдХреГрдкрдпрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЫрд╡рд┐ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ",
        "Marathi": "рдХреГрдкрдпрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╕реБрд░реВ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдПрдХ рдЗрдореЗрдЬ рдЕрдкрд▓реЛрдб рдХрд░рд╛",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░кр▒Нр░░р░╛р░░р░Вр░нр░┐р░Вр░Ър░бр░╛р░ир░┐р░Хр░┐ р░жр░пр░Ър▒Зр░╕р░┐ р░Тр░Х р░Ър░┐р░др▒Нр░░р░╛р░ир▒Нр░ир░┐ р░Ер░кр▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпИродрпН родрпКроЯроЩрпНроХ роТро░рпБ рокроЯродрпНродрпИрокрпН рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН"
    },
    "image_preview": {
        "English": "Image Preview",
        "Hindi": "рдЫрд╡рд┐ рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди",
        "Marathi": "рдЗрдореЗрдЬрдЪреЗ рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди",
        "Telugu": "р░Ър░┐р░др▒Нр░░р░В р░кр▒Нр░░р░┐р░╡р▒Нр░пр▒В",
        "Tamil": "рокроЯ роорпБройрпНройрпЛроЯрпНроЯроорпН"
    },
    "image_info_dim": {
        "English": "Dimensions:",
        "Hindi": "рдЖрдпрд╛рдо:",
        "Marathi": "рдкрд░рд┐рдорд╛рдгреЗ:",
        "Telugu": "р░Хр▒Кр░▓р░др░▓р▒Б:",
        "Tamil": "рокро░ро┐рооро╛рогроЩрпНроХро│рпН:"
    },
    "image_info_format": {
        "English": "Format:",
        "Hindi": "рд╕реНрд╡рд░реВрдк:",
        "Marathi": "рд╕реНрд╡рд░реВрдк:",
        "Telugu": "р░лр░╛р░░р▒Нр░ор░╛р░Яр▒Н:",
        "Tamil": "ро╡роЯро┐ро╡роорпН:"
    },
    "image_info_size": {
        "English": "Size:",
        "Hindi": "рдЖрдХрд╛рд░:",
        "Marathi": "рдЖрдХрд╛рд░:",
        "Telugu": "р░кр░░р░┐р░ор░╛р░гр░В:",
        "Tamil": "роЕро│ро╡рпБ:"
    },
    "preview_placeholder_1": {
        "English": "Image preview will appear here",
        "Hindi": "рдЫрд╡рд┐ рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди рдпрд╣рд╛рдБ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛",
        "Marathi": "рдЗрдореЗрдЬрдЪреЗ рдкреВрд░реНрд╡рд╛ро╡рд▓реЛрдХрди рдпреЗрдереЗ рджрд┐рд╕реЗрд▓",
        "Telugu": "р░Ър░┐р░др▒Нр░░р░В р░кр▒Нр░░р░┐р░╡р▒Нр░пр▒В р░Зр░Хр▒Нр░Хр░б р░Хр░ир░┐р░кр░┐р░╕р▒Нр░др▒Бр░Вр░жр░┐",
        "Tamil": "рокроЯ роорпБройрпНройрпЛроЯрпНроЯроорпН роЗроЩрпНроХрпЗ родрпЛройрпНро▒рпБроорпН"
    },
    "preview_placeholder_2": {
        "English": "Upload an image to see preview and details",
        "Hindi": "рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди рдФрд░ рд╡рд┐рд╡рд░рдг рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЫрд╡рд┐ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ",
        "Marathi": "рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди рдЖрдгрд┐ рддрдкрд╢реАрд▓ рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА рдПрдХ рдЗрдореЗрдЬ рдЕрдкрд▓реЛрдб рдХрд░рд╛",
        "Telugu": "р░кр▒Нр░░р░┐р░╡р▒Нр░пр▒В р░ор░░р░┐р░пр▒Б р░╡р░┐р░╡р░░р░╛р░▓р░ир▒Б р░Ър▒Вр░бр░Яр░╛р░ир░┐р░Хр░┐ р░Тр░Х р░Ър░┐р░др▒Нр░░р░╛р░ир▒Нр░ир░┐ р░Ер░кр▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "роорпБройрпНройрпЛроЯрпНроЯродрпНродрпИрокрпН рокро╛ро░рпНроХрпНроХ роТро░рпБ рокроЯродрпНродрпИрокрпН рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН"
    },
    "analysis_progress": {
        "English": "AI Analysis in Progress",
        "Hindi": "рдПрдЖрдИ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЬрд╛рд░реА рд╣реИ",
        "Marathi": "рдПрдЖрдп рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╕реБрд░реВ рдЖрд╣реЗ",
        "Telugu": "AI р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░кр▒Бр░░р▒Лр░Чр░др░┐р░▓р▒Л р░Йр░Вр░жр░┐",
        "Tamil": "AI рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роироЯроирпНродрпБ роХрпКрогрпНроЯро┐ро░рпБроХрпНроХро┐ро▒родрпБ"
    },
    "step_1": {
        "English": "Processing image...",
        "Hindi": "рдЫрд╡рд┐ рд╕рдВрд╕рд╛рдзрд┐рдд рд╣реЛ рд░рд╣реА рд╣реИ...",
        "Marathi": "рдЗрдореЗрдЬрд╡рд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реЛрдд рдЖрд╣реЗ...",
        "Telugu": "р░Ър░┐р░др▒Нр░░р░╛р░ир▒Нр░ир░┐ р░кр▒Нр░░р░╛р░╕р▒Жр░╕р▒Н р░Ър▒Зр░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "рокроЯроорпН роЪрпЖропро▓ро╛роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ..."
    },
    "step_2": {
        "English": "Initializing AI models...",
        "Hindi": "рдПрдЖрдИ рдореЙрдбрд▓ рд╢реБрд░реВ рд╣реЛ рд░рд╣реЗ рд╣реИрдВ...",
        "Marathi": "рдПрдЖрдп рдореЙрдбреЗрд▓ рд╕реБрд░реВ рд╣реЛрдд рдЖрд╣реЗрдд...",
        "Telugu": "AI р░ор▒Лр░бр░│р▒Нр░▓р░ир▒Б р░кр▒Нр░░р░╛р░░р░Вр░нр░┐р░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "AI рооро╛родро┐ро░ро┐роХро│рпН родрпБро╡роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ..."
    },
    "step_3": {
        "English": "Analyzing crop characteristics...",
        "Hindi": "рдлрд╕рд▓ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг...",
        "Marathi": "рдкрд┐рдХрд╛рдВрдЪреНрдпрд╛ рдЧреБрдгрдзрд░реНрдорд╛рдВрдЪреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдд рдЖрд╣реЗ...",
        "Telugu": "р░кр░Вр░Я р░▓р░Хр▒Нр░╖р░гр░╛р░▓р░ир▒Б р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░┐р░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "рокропро┐ро░рпН роХрпБрогро╛родро┐роЪропроЩрпНроХро│рпИрокрпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНроХро┐ро▒родрпБ..."
    },
    "step_4": {
        "English": "Detecting diseases/pests...",
        "Hindi": "рд░реЛрдЧ/рдХреАрдЯреЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛...",
        "Marathi": "рд░реЛрдЧ/рдХреАрдЯрдХрд╛рдВрдЪрд╛ рд╢реЛрдз рдШреЗрдд рдЖрд╣реЗ...",
        "Telugu": "р░╡р▒Нр░пр░╛р░зр▒Бр░▓р▒Б/р░др▒Жр░Чр▒Бр░│р▒Нр░▓р░ир▒Б р░Чр▒Бр░░р▒Нр░др░┐р░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "роирпЛропрпНроХро│рпН/рокрпВроЪрпНроЪро┐роХро│рпИроХрпН роХрогрпНроЯро▒ро┐родро▓рпН..."
    },
    "step_5": {
        "English": "Generating recommendations...",
        "Hindi": "рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рддреИрдпрд╛рд░ рдХреА рдЬрд╛ рд░рд╣реА рд╣реИрдВ...",
        "Marathi": "рд╢рд┐рдлрд╛рд░рд╢реА рддрдпрд╛рд░ рдХрд░рдд рдЖрд╣реЗ...",
        "Telugu": "р░╕р░┐р░лр░╛р░░р▒Нр░╕р▒Бр░▓р░ир▒Б р░Йр░др▒Нр░кр░др▒Нр░др░┐ р░Ър▒Зр░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "рокро░ро┐роирпНродрпБро░рпИроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХрпБроХро┐ро▒родрпБ..."
    },
    "step_6": {
        "English": "Finalizing analysis...",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЕрдВрддрд┐рдо рд░реВрдк рджрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЕрдВрддрд┐рдо рдЯрдкреНрдкреНрдпрд╛рдд рдЖрд╣реЗ...",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░гр░ир▒Б р░Цр░░р░╛р░░р▒Б р░Ър▒Зр░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпИ роЗро▒рпБродро┐ роЪрпЖропрпНроХро┐ро▒родрпБ..."
    },
    "analysis_complete": {
        "English": "Analysis Complete!",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреВрд░рд╛ рд╣реБрдЖ!",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреВрд░реНрдг рдЭрд╛рд▓реЗ!",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░кр▒Вр░░р▒Нр░др░пр░┐р░Вр░жр░┐!",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роиро┐ро▒рпИро╡рпБ!"
    },
    "success_message": {
        "English": "Analysis completed successfully! Check the 'Analysis Results' tab for detailed insights.",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкреВрд░рд╛ рд╣реЛ рдЧрдпрд╛ рд╣реИ! рд╡рд┐рд╕реНрддреГрдд рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП 'рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░рд┐рдгрд╛рдо' рдЯреИрдм рджреЗрдЦреЗрдВред",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рдкреВрд░реНрдг рдЭрд╛рд▓реЗ рдЖрд╣реЗ! рд╕рдЦреЛрд▓ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА 'рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░рд┐рдгрд╛рдо' рдЯреЕрдм рддрдкрд╛рд╕рд╛.",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░╡р░┐р░Ьр░пр░╡р░Вр░др░Вр░Чр░╛ р░кр▒Вр░░р▒Нр░др░пр░┐р░Вр░жр░┐! р░╡р░┐р░╡р░░р░гр░╛р░др▒Нр░ор░Х р░Ер░Вр░др░░р▒Нр░жр▒Гр░╖р▒Нр░Яр▒Бр░▓ р░Хр▒Лр░╕р░В 'р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░лр░▓р░┐р░др░╛р░▓р▒Б' р░Яр▒Нр░пр░╛р░мр▒НтАМр░ир▒Б р░др░ир░┐р░Цр▒А р░Ър▒Зр░пр░Вр░бр░┐ред",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роорпБроЯро┐роирпНродродрпБ! ро╡ро┐ро░ро┐ро╡ро╛рой роирпБрогрпНрогро▒ро┐ро╡рпБроХро│рпБроХрпНроХрпБ 'рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роорпБроЯро┐ро╡рпБроХро│рпН' родро╛ро╡ро▓рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН."
    },
    "analysis_failed": {
        "English": "Analysis failed: {error}",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╡рд┐рдлрд▓: {error}",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЕрдпрд╢рд╕реНрд╡реА рдЭрд╛рд▓реЗ: {error}",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░╡р░┐р░лр░▓р░ор▒Ир░Вр░жр░┐: {error}",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ родрпЛро▓рпНро╡ро┐ропроЯрпИроирпНродродрпБ: {error}"
    },
    "translating_text": {
        "English": "Translating to {language}...",
        "Hindi": "рд╣рд┐рдВрджреА рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рд╣реЛ рд░рд╣рд╛ рд╣реИ...",
        "Marathi": "рдорд░рд╛рдареАрдд рдЕрдиреБрд╡рд╛рдж рд╣реЛрдд рдЖрд╣реЗ...",
        "Telugu": "р░др▒Жр░▓р▒Бр░Чр▒Бр░▓р▒Лр░Хр░┐ р░Ер░ир▒Бр░╡р░жр░┐р░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "родрооро┐ро┤рпБроХрпНроХрпБ роорпКро┤ро┐рокрпЖропро░рпНроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ..."
    },
    "selected_crop_image": {
        "English": "Selected crop image",
        "Hindi": "рдЪрдпрдирд┐рдд рдлрд╕рд▓ рдХреА рдЫрд╡рд┐",
        "Marathi": "рдирд┐рд╡рдбрд▓реЗрд▓реЗ рдкрд┐рдХрд╛рдЪреЗ рдЪрд┐рддреНрд░",
        "Telugu": "р░Ор░Вр░Ър▒Бр░Хр▒Бр░ир▒Нр░и р░кр░Вр░Я р░Ър░┐р░др▒Нр░░р░В",
        "Tamil": "родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХрокрпНрокроЯрпНроЯ рокропро┐ро░рпН рокроЯроорпН"
    },
    "location_details": {
        "English": "Location Details:",
        "Hindi": "рд╕реНрдерд╛рди рд╡рд┐рд╡рд░рдг:",
        "Marathi": "рд╕реНрдерд╛рди рддрдкрд╢реАрд▓:",
        "Telugu": "р░╕р▒Нр░ер░╛р░и р░╡р░┐р░╡р░░р░╛р░▓р▒Б:",
        "Tamil": "роЗро░рпБрокрпНрокро┐роЯ ро╡ро┐ро╡ро░роЩрпНроХро│рпН:"
    },
    "commodity_info": {
        "English": "Commodity Info:",
        "Hindi": "рд╡рд╕реНрддреБ рдЬрд╛рдирдХрд╛рд░реА:",
        "Marathi": "рд╡рд╕реНрддреВ рдорд╛рд╣рд┐рддреА:",
        "Telugu": "р░╡р░╕р▒Нр░др▒Бр░╡р▒Б р░╕р░ор░╛р░Ър░╛р░░р░В:",
        "Tamil": "рокрпКро░рпБро│рпН родроХро╡ро▓рпН:"
    },
    "price_information": {
        "English": "Price Information:",
        "Hindi": "рдореВрд▓реНрдп рдЬрд╛рдирдХрд╛рд░реА:",
        "Marathi": "рдХрд┐рдВрдордд рдорд╛рд╣рд┐рддреА:",
        "Telugu": "р░зр░░ р░╕р░ор░╛р░Ър░╛р░░р░В:",
        "Tamil": "ро╡ро┐ро▓рпИ родроХро╡ро▓рпН:"
    },
    "market_data": {
        "English": "Market Data:",
        "Hindi": "рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛:",
        "Marathi": "рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛:",
        "Telugu": "р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░бр▒Зр░Яр░╛:",
        "Tamil": "роЪроирпНродрпИ родро░ро╡рпБ:"
    },
    "state": {
        "English": "State",
        "Hindi": "рд░рд╛рдЬреНрдп",
        "Marathi": "рд░рд╛рдЬреНрдп",
        "Telugu": "р░░р░╛р░╖р▒Нр░Яр▒Нр░░р░В",
        "Tamil": "рооро╛роиро┐ро▓роорпН"
    },
    "district": {
        "English": "District",
        "Hindi": "рдЬрд┐рд▓рд╛",
        "Marathi": "рдЬрд┐рд▓реНрд╣рд╛",
        "Telugu": "р░Ьр░┐р░▓р▒Нр░▓р░╛",
        "Tamil": "рооро╛ро╡роЯрпНроЯроорпН"
    },
    "market": {
        "English": "Market",
        "Hindi": "рдмрд╛рдЬрд╛рд░",
        "Marathi": "рдмрд╛рдЬрд╛рд░",
        "Telugu": "р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н",
        "Tamil": "роЪроирпНродрпИ"
    },
    "commodity": {
        "English": "Commodity",
        "Hindi": "рд╡рд╕реНрддреБ",
        "Marathi": "рд╡рд╕реНрддреВ",
        "Telugu": "р░╡р░╕р▒Нр░др▒Бр░╡р▒Б",
        "Tamil": "рокрпКро░рпБро│рпН"
    },
    "variety": {
        "English": "Variety",
        "Hindi": "рдХрд┐рд╕реНрдо",
        "Marathi": "рдЬрд╛рдд",
        "Telugu": "р░░р░Хр░В",
        "Tamil": "ро╡роХрпИ"
    },
    "modal_price": {
        "English": "Modal Price",
        "Hindi": "рдореЙрдбрд▓ рдореВрд▓реНрдп",
        "Marathi": "рдореЙрдбрд▓ рдХрд┐рдВрдордд",
        "Telugu": "р░ор▒Лр░бр░▓р▒Н р░зр░░",
        "Tamil": "рооро╛роЯро▓рпН ро╡ро┐ро▓рпИ"
    },
    "min_price": {
        "English": "Min Price",
        "Hindi": "рдиреНрдпреВрдирддрдо рдореВрд▓реНрдп",
        "Marathi": "рдХрд┐рдорд╛рди рдХрд┐рдВрдордд",
        "Telugu": "р░Хр░ир░┐р░╖р▒Нр░Я р░зр░░",
        "Tamil": "роХрпБро▒рпИроирпНродрокроЯрпНроЪ ро╡ро┐ро▓рпИ"
    },
    "max_price": {
        "English": "Max Price",
        "Hindi": "рдЕрдзрд┐рдХрддрдо рдореВрд▓реНрдп",
        "Marathi": "рдХрдорд╛рд▓ рдХрд┐рдВрдордд",
        "Telugu": "р░Чр░░р░┐р░╖р▒Нр░Я р░зр░░",
        "Tamil": "роЕродро┐роХрокроЯрпНроЪ ро╡ро┐ро▓рпИ"
    },
    "arrival_date": {
        "English": "Arrival Date",
        "Hindi": "рдЖрдЧрдорди рддрд┐рдерд┐",
        "Marathi": "рдЖрдЧрдорди рддрд╛рд░реАрдЦ",
        "Telugu": "р░░р░╛р░Х р░др▒Зр░жр▒А",
        "Tamil": "ро╡ро░рпБроХрпИ родрпЗродро┐"
    },
    "analysis_results_title": {
        "English": "Analysis Results",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░рд┐рдгрд╛рдо",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░рд┐рдгрд╛рдо",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░лр░▓р░┐р░др░╛р░▓р▒Б",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роорпБроЯро┐ро╡рпБроХро│рпН"
    },
    "quick_actions": {
        "English": "Quick Actions",
        "Hindi": "рддреНрд╡рд░рд┐рдд рдХрд╛рд░реНрдп",
        "Marathi": "рдЬрд▓рдж рдХреГрддреА",
        "Telugu": "р░др▒Нр░╡р░░р░┐р░д р░Ър░░р▒Нр░пр░▓р▒Б",
        "Tamil": "ро╡ро┐ро░рпИро╡ро╛рой роЪрпЖропро▓рпНроХро│рпН"
    },
    "download_report": {
        "English": "Download Report",
        "Hindi": "рд░рд┐рдкреЛрд░реНрдЯ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ",
        "Marathi": "рдЕрд╣рд╡рд╛рд▓ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рд╛",
        "Telugu": "р░ир░┐р░╡р▒Зр░жр░┐р░Хр░ир▒Б р░бр▒Мр░ир▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "роЕро▒ро┐роХрпНроХрпИропрпИрокрпН рокродро┐ро╡ро┐ро▒роХрпНроХро╡рпБроорпН"
    },
    "download_help": {
        "English": "Download analysis as PDF",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЛ рдкреАрдбреАрдПрдл рдХреЗ рд░реВрдк рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреАрдбреАрдПрдл рдореНрд╣рдгреВрди рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рд╛",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░гр░ир▒Б PDFр░Чр░╛ р░бр▒Мр░ир▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпИ PDF роЖроХ рокродро┐ро╡ро┐ро▒роХрпНроХро╡рпБроорпН"
    },
    "download_success": {
        "English": "Report downloaded successfully!",
        "Hindi": "рд░рд┐рдкреЛрд░реНрдЯ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдбрд╛рдЙрдирд▓реЛрдб рд╣реЛ рдЧрдИ рд╣реИ!",
        "Marathi": "рдЕрд╣рд╡рд╛рд▓ рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рдбрд╛рдЙрдирд▓реЛрдб рдЭрд╛рд▓рд╛ рдЖрд╣реЗ!",
        "Telugu": "р░ир░┐р░╡р▒Зр░жр░и р░╡р░┐р░Ьр░пр░╡р░Вр░др░Вр░Чр░╛ р░бр▒Мр░ир▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░пр░мр░бр░┐р░Вр░жр░┐!",
        "Tamil": "роЕро▒ро┐роХрпНроХрпИ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ рокродро┐ро╡ро┐ро▒роХрпНроХроорпН роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ!"
    },
    "re_analyze": {
        "English": "Re-analyze",
        "Hindi": "рдкреБрдирдГ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ",
        "Marathi": "рдкреБрдиреНрд╣рд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рд╛",
        "Telugu": "р░ор░│р▒Нр░▓р▒А р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░┐р░Вр░Ър░Вр░бр░┐",
        "Tamil": "роорпАрогрпНроЯрпБроорпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропро╡рпБроорпН"
    },
    "re_analyze_help": {
        "English": "Run analysis again",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдлрд┐рд░ рд╕реЗ рдЪрд▓рд╛рдПрдБ",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреБрдиреНрд╣рд╛ рд╕реБрд░реВ рдХрд░рд╛",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░гр░ир▒Б р░ор░│р▒Нр░▓р▒А р░Ер░ор░▓р▒Б р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпИ роорпАрогрпНроЯрпБроорпН роЗропроХрпНроХро╡рпБроорпН"
    },
    "save_to_history": {
        "English": "Save to History",
        "Hindi": "рдЗрддрд┐рд╣рд╛рд╕ рдореЗрдВ рд╕рд╣реЗрдЬреЗрдВ",
        "Marathi": "рдЗрддрд┐рд╣рд╛рд╕рд╛рдд рд╕реЗрд╡реНрд╣ рдХрд░рд╛",
        "Telugu": "р░Ър░░р░┐р░др▒Нр░░р░▓р▒Л р░╕р▒Зр░╡р▒Н р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "ро╡ро░ро▓ро╛ро▒рпНро▒ро┐ро▓рпН роЪрпЗрооро┐роХрпНроХро╡рпБроорпН"
    },
    "save_success": {
        "English": "Analysis saved to history!",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЗрддрд┐рд╣рд╛рд╕ рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЧрдпрд╛!",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЗрддрд┐рд╣рд╛рд╕рд╛рдд рд╕реЗрд╡реНрд╣ рдЭрд╛рд▓реЗ!",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░Ър░░р░┐р░др▒Нр░░р░▓р▒Л р░╕р▒Зр░╡р▒Н р░Ър▒Зр░пр░мр░бр░┐р░Вр░жр░┐!",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ ро╡ро░ро▓ро╛ро▒рпНро▒ро┐ро▓рпН роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ!"
    },
    "no_analysis_title": {
        "English": "No Analysis Available",
        "Hindi": "рдХреЛрдИ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИ",
        "Marathi": "рдХреЛрдгрддреЗрд╣реА рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЙрдкрд▓рдмреНрдз рдирд╛рд╣реА",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░Ер░Вр░жр▒Бр░мр░╛р░Яр▒Бр░▓р▒Л р░▓р▒Зр░жр▒Б",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роОродрпБро╡рпБроорпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ"
    },
    "no_analysis_text_1": {
        "English": "Upload an image and run analysis to see detailed results here",
        "Hindi": "рдпрд╣рд╛рдВ рд╡рд┐рд╕реНрддреГрдд рдкрд░рд┐рдгрд╛рдо рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЫрд╡рд┐ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЪрд▓рд╛рдПрдВ",
        "Marathi": "рд╕рд╡рд┐рд╕реНрддрд░ рдкрд░рд┐рдгрд╛рдо рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА рдПрдХ рдЗрдореЗрдЬ рдЕрдкрд▓реЛрдб рдХрд░рд╛ рдЖрдгрд┐ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╕реБрд░реВ рдХрд░рд╛",
        "Telugu": "р░╡р░┐р░╡р░░р░гр░╛р░др▒Нр░ор░Х р░лр░▓р░┐р░др░╛р░▓р░ир▒Б р░Ър▒Вр░бр░Яр░╛р░ир░┐р░Хр░┐ р░Тр░Х р░Ър░┐р░др▒Нр░░р░╛р░ир▒Нр░ир░┐ р░Ер░кр▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░╕р░┐ р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░гр░ир▒Б р░Ер░ор░▓р▒Б р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "ро╡ро┐ро░ро┐ро╡ро╛рой роорпБроЯро┐ро╡рпБроХро│рпИрокрпН рокро╛ро░рпНроХрпНроХ роТро░рпБ рокроЯродрпНродрпИрокрпН рокродро┐ро╡рпЗро▒рпНро▒ро┐ рокроХрпБрокрпНрокро╛ропрпНро╡рпИ роЗропроХрпНроХро╡рпБроорпН"
    },
    "no_analysis_text_2": {
        "English": "Our AI will provide comprehensive crop analysis including disease detection, treatment recommendations, and growing tips",
        "Hindi": "рд╣рдорд╛рд░рд╛ рдПрдЖрдИ рд░реЛрдЧ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ, рдЙрдкрдЪрд╛рд░ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рдФрд░ рдЦреЗрддреА рдХреЗ рд╕реБрдЭрд╛рд╡реЛрдВ рд╕рд╣рд┐рдд рд╡реНрдпрд╛рдкрдХ рдлрд╕рд▓ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛",
        "Marathi": "рдЖрдордЪрд╛ рдПрдЖрдп рд░реЛрдЧ рдУрд│рдЦрдгреЗ, рдЙрдкрдЪрд╛рд░рд╛рдВрдЪреНрдпрд╛ рд╢рд┐рдлрд╛рд░рд╢реА рдЖрдгрд┐ рд╡рд╛рдвреАрдЪреНрдпрд╛ рдЯрд┐рдкреНрд╕рд╕рд╣ рдкрд┐рдХрд╛рдЪреЗ рд╕рдЦреЛрд▓ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рджреЗрдИрд▓",
        "Telugu": "р░ор░╛ AI р░╡р▒Нр░пр░╛р░зр░┐ р░ир░┐р░░р▒Нр░зр░╛р░░р░г, р░Ър░┐р░Хр░┐р░др▒Нр░╕ р░╕р░┐р░лр░╛р░░р▒Нр░╕р▒Бр░▓р▒Б р░ор░░р░┐р░пр▒Б р░╕р░╛р░Чр▒Б р░Ър░┐р░Яр▒Нр░Хр░╛р░▓р░др▒Л р░╕р░╣р░╛ р░╕р░ор░Чр▒Нр░░ р░кр░Вр░Я р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░гр░ир▒Б р░Ер░Вр░жр░┐р░╕р▒Нр░др▒Бр░Вр░жр░┐",
        "Tamil": "роОроЩрпНроХро│рпН AI роирпЛропрпН роХрогрпНроЯро▒ро┐родро▓рпН, роЪро┐роХро┐роЪрпНроЪрпИ рокро░ро┐роирпНродрпБро░рпИроХро│рпН рооро▒рпНро▒рпБроорпН ро╡ро│ро░рпНрокрпНрокрпБ роХрпБро▒ро┐рокрпНрокрпБроХро│рпН роЙроЯрпНрокроЯ ро╡ро┐ро░ро┐ро╡ро╛рой рокропро┐ро░рпН рокроХрпБрокрпНрокро╛ропрпНро╡рпИ ро╡ро┤роЩрпНроХрпБроорпН"
    },
    "market_prices_title": {
        "English": "Real-time Market Prices",
        "Hindi": "рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдХреЗ рдмрд╛рдЬрд╛рд░ рднрд╛рд╡",
        "Marathi": "рд╡рд╛рд╕реНрддрд╡рд┐рдХ-рд╡реЗрд│ рдмрд╛рдЬрд╛рд░ рднрд╛рд╡",
        "Telugu": "р░ир░┐р░Ь-р░╕р░ор░п р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░зр░░р░▓р▒Б",
        "Tamil": "роиро┐роХро┤рпНроирпЗро░ роЪроирпНродрпИ ро╡ро┐ро▓рпИроХро│рпН"
    },
    "market_data_for": {
        "English": "Market data for: {crop}",
        "Hindi": "рдЗрд╕рдХреЗ рд▓рд┐рдП рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛: {crop}",
        "Marathi": "рдпрд╛ рдкрд┐рдХрд╛рд╕рд╛рдареА рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛: {crop}",
        "Telugu": "р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░бр▒Зр░Яр░╛: {crop}",
        "Tamil": "роЪроирпНродрпИ родро░ро╡рпБ: {crop}"
    },
    "fetching_prices": {
        "English": "Fetching real-time market prices...",
        "Hindi": "рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдХреЗ рдмрд╛рдЬрд╛рд░ рднрд╛рд╡ рд▓рд╛рдП рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ...",
        "Marathi": "рд╡рд╛рд╕реНрддрд╡рд┐рдХ-рд╡реЗрд│ рдмрд╛рдЬрд╛рд░ рднрд╛рд╡ рдЖрдгрдд рдЖрд╣реЗ...",
        "Telugu": "р░ир░┐р░Ь-р░╕р░ор░п р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░зр░░р░▓р░ир▒Б р░др▒Жр░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "роиро┐роХро┤рпНроирпЗро░ роЪроирпНродрпИ ро╡ро┐ро▓рпИроХро│рпН рокрпЖро▒рокрпНрокроЯрпБроХро┐ро▒родрпБ..."
    },
    "market_overview": {
        "English": "Market Overview",
        "Hindi": "рдмрд╛рдЬрд╛рд░ рдХрд╛ рдЕрд╡рд▓реЛрдХрди",
        "Marathi": "рдмрд╛рдЬрд╛рд░рдЪрд╛ рдЖрдврд╛рд╡рд╛",
        "Telugu": "р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░Ер░╡р░▓р▒Лр░Хр░ир░В",
        "Tamil": "роЪроирпНродрпИ роорпЗро▓рпЛроЯрпНроЯроорпН"
    },
    "avg_price": {
        "English": "Average Price",
        "Hindi": "рдФрд╕рдд рдореВрд▓реНрдп",
        "Marathi": "рд╕рд░рд╛рд╕рд░реА рдХрд┐рдВрдордд",
        "Telugu": "р░╕р░Чр░Яр▒Б р░зр░░",
        "Tamil": "роЪро░ро╛роЪро░ро┐ ро╡ро┐ро▓рпИ"
    },
    "avg_price_help": {
        "English": "Average price across all markets",
        "Hindi": "рд╕рднреА рдмрд╛рдЬрд╛рд░реЛрдВ рдореЗрдВ рдФрд╕рдд рдореВрд▓реНрдп",
        "Marathi": "рд╕рд░реНрд╡ рдмрд╛рдЬрд╛рд░рд╛рдВрдордзреАрд▓ рд╕рд░рд╛рд╕рд░реА рдХрд┐рдВрдордд",
        "Telugu": "р░Ер░ир▒Нр░ир░┐ р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Нр░▓р░▓р▒Л р░╕р░Чр░Яр▒Б р░зр░░",
        "Tamil": "роЕройрпИродрпНродрпБ роЪроирпНродрпИроХро│ро┐ро▓рпБроорпН роЪро░ро╛роЪро░ро┐ ро╡ро┐ро▓рпИ"
    },
    "price_chart_title": {
        "English": "Price Comparison Chart",
        "Hindi": "рдореВрд▓реНрдп рддреБрд▓рдирд╛ рдЪрд╛рд░реНрдЯ",
        "Marathi": "рдХрд┐рдВрдордд рддреБрд▓рдирд╛ рдЪрд╛рд░реНрдЯ",
        "Telugu": "р░зр░░р░▓ р░кр▒Лр░▓р░┐р░Х р░Ър░╛р░░р▒Нр░Яр▒Н",
        "Tamil": "ро╡ро┐ро▓рпИ роТрокрпНрокрпАроЯрпНроЯрпБ ро╡ро┐ро│роХрпНроХрокрпНрокроЯроорпН"
    },
    "market_info_title": {
        "English": "Market Information",
        "Hindi": "рдмрд╛рдЬрд╛рд░ рдХреА рдЬрд╛рдирдХрд╛рд░реА",
        "Marathi": "рдмрд╛рдЬрд╛рд░ рдорд╛рд╣рд┐рддреА",
        "Telugu": "р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░╕р░ор░╛р░Ър░╛р░░р░В",
        "Tamil": "роЪроирпНродрпИ родроХро╡ро▓рпН"
    },
    "no_market_data": {
        "English": "No market data available for \"{crop_name}\"",
        "Hindi": "\"{crop_name}\" рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИ",
        "Marathi": "\"{crop_name}\" рд╕рд╛рдареА рдХреЛрдгрддрд╛рд╣реА рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛ рдЙрдкрд▓рдмреНрдз рдирд╛рд╣реА",
        "Telugu": "\"{crop_name}\" р░Хр▒Лр░╕р░В р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░бр▒Зр░Яр░╛ р░Ер░Вр░жр▒Бр░мр░╛р░Яр▒Бр░▓р▒Л р░▓р▒Зр░жр▒Б",
        "Tamil": "\"{crop_name}\" роХрпНроХро╛рой роЪроирпНродрпИ родро░ро╡рпБ роОродрпБро╡рпБроорпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ"
    },
    "api_unavailable_1": {
        "English": "Market prices might not be available for this specific crop or the API might be temporarily unavailable.",
        "Hindi": "рдЗрд╕ рд╡рд┐рд╢реЗрд╖ рдлрд╕рд▓ рдХреЗ рд▓рд┐рдП рдмрд╛рдЬрд╛рд░ рдореВрд▓реНрдп рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдПрдкреАрдЖрдИ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдЕрдиреБрдкрд▓рдмреНрдз рд╣реЛ рд╕рдХрддрд╛ рд╣реИред",
        "Marathi": "рдпрд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд┐рдХрд╛рд╕рд╛рдареА рдмрд╛рдЬрд╛рд░ рднрд╛рд╡ рдЙрдкрд▓рдмреНрдз рдирд╕рддреАрд▓ рдХрд┐рдВрд╡рд╛ рдПрдкреАрдЖрдп рддрд╛рддреНрдкреБрд░рддреЗ рдЕрдиреБрдкрд▓рдмреНрдз рдЕрд╕реВ рд╢рдХрддреЗред",
        "Telugu": "р░И р░ир░┐р░░р▒Нр░жр░┐р░╖р▒Нр░Я р░кр░Вр░Яр░Хр▒Б р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░зр░░р░▓р▒Б р░Ер░Вр░жр▒Бр░мр░╛р░Яр▒Бр░▓р▒Л р░Йр░Вр░бр░Хр░кр▒Лр░╡р░Ър▒Нр░Ър▒Б р░▓р▒Зр░жр░╛ API р░др░╛р░др▒Нр░Хр░╛р░▓р░┐р░Хр░Вр░Чр░╛ р░Ер░Вр░жр▒Бр░мр░╛р░Яр▒Бр░▓р▒Л р░Йр░Вр░бр░Хр░кр▒Лр░╡р░Ър▒Нр░Ър▒Бред",
        "Tamil": "роЗроирпНрод роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ рокропро┐ро░рпБроХрпНроХрпБ роЪроирпНродрпИ ро╡ро┐ро▓рпИроХро│рпН роХро┐роЯрпИроХрпНроХро╛рооро▓рпН рокрпЛроХро▓ро╛роорпН роЕро▓рпНро▓родрпБ API родро▒рпНроХро╛ро▓ро┐роХрооро╛роХ роХро┐роЯрпИроХрпНроХро╛рооро▓рпН рокрпЛроХро▓ро╛роорпН."
    },
    "api_unavailable_2": {
        "English": "Try again later or check with local agricultural markets.",
        "Hindi": "рдмрд╛рдж рдореЗрдВ рдлрд┐рд░ рд╕реЗ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдпрд╛ рд╕реНрдерд╛рдиреАрдп рдХреГрд╖рд┐ рдмрд╛рдЬрд╛рд░реЛрдВ рд╕реЗ рдЬрд╛рдВрдЪ рдХрд░реЗрдВред",
        "Marathi": "рдирдВрддрд░ рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди рдХрд░рд╛ рдХрд┐рдВрд╡рд╛ рд╕реНрдерд╛рдирд┐рдХ рдХреГрд╖реА рдмрд╛рдЬрд╛рд░рдкреЗрдард╛рдВрд╢реА рд╕рдВрдкрд░реНрдХ рд╕рд╛рдзрд╛ред",
        "Telugu": "р░др░░р▒Бр░╡р░╛р░д р░ор░│р▒Нр░▓р▒А р░кр▒Нр░░р░пр░др▒Нр░ир░┐р░Вр░Ър░Вр░бр░┐ р░▓р▒Зр░жр░╛ р░╕р▒Нр░ер░╛р░ир░┐р░Х р░╡р▒Нр░пр░╡р░╕р░╛р░п р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Нр░▓р░ир▒Б р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐ред",
        "Tamil": "рокро┐ройрпНройро░рпН роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН роЕро▓рпНро▓родрпБ роЙро│рпНро│рпВро░рпН ро╡рпЗро│ро╛рогрпН роЪроирпНродрпИроХро│рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН."
    },
    "error_fetching_market_data": {
        "English": "Error fetching market data: {error}",
        "Hindi": "рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛ рд▓рд╛рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: {error}",
        "Marathi": "рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛ рдЖрдгрддрд╛рдирд╛ рддреНрд░реБрдЯреА: {error}",
        "Telugu": "р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░бр▒Зр░Яр░╛р░ир▒Б р░кр▒Кр░Вр░жр▒Бр░др▒Бр░ир▒Нр░ир░кр▒Нр░кр▒Бр░бр▒Б р░▓р▒Лр░кр░В: {error}",
        "Tamil": "роЪроирпНродрпИ родро░ро╡рпИ роОроЯрпБрокрпНрокродро┐ро▓рпН рокро┐ро┤рпИ: {error}"
    },
    "temp_unavailable_title": {
        "English": "Market Data Temporarily Unavailable",
        "Hindi": "рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдЕрдиреБрдкрд▓рдмреНрдз",
        "Marathi": "рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛ рддрд╛рддреНрдкреБрд░рддрд╛ рдЕрдиреБрдкрд▓рдмреНрдз рдЖрд╣реЗ",
        "Telugu": "р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░бр▒Зр░Яр░╛ р░др░╛р░др▒Нр░Хр░╛р░▓р░┐р░Хр░Вр░Чр░╛ р░Ер░Вр░жр▒Бр░мр░╛р░Яр▒Бр░▓р▒Л р░▓р▒Зр░жр▒Б",
        "Tamil": "роЪроирпНродрпИ родро░ро╡рпБ родро▒рпНроХро╛ро▓ро┐роХрооро╛роХ роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ"
    },
    "temp_unavailable_text_1": {
        "English": "We're experiencing technical difficulties accessing market data.",
        "Hindi": "рд╣рдореЗрдВ рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдореЗрдВ рддрдХрдиреАрдХреА рдХрдард┐рдирд╛рдИ рд╣реЛ рд░рд╣реА рд╣реИред",
        "Marathi": "рдЖрдореНрд╣рд╛рд▓рд╛ рдмрд╛рдЬрд╛рд░ рдбреЗрдЯрд╛ рдНрдХреНр░╕р▒Жр░╕р▒Н рдХрд░рддрд╛рдирд╛ рддрд╛рдВрддреНрд░рд┐рдХ рдЕрдбрдЪрдгреА рдпреЗрдд рдЖрд╣реЗрддред",
        "Telugu": "р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░бр▒Зр░Яр░╛р░ир▒Б р░пр░╛р░Хр▒Нр░╕р▒Жр░╕р▒Н р░Ър▒Зр░пр░бр░Вр░▓р▒Л р░ор░╛р░Хр▒Б р░╕р░╛р░Вр░Хр▒Зр░др░┐р░Х р░╕р░ор░╕р▒Нр░пр░▓р▒Б р░Ор░жр▒Бр░░р░╡р▒Бр░др▒Бр░ир▒Нр░ир░╛р░пр░┐ред",
        "Tamil": "роЪроирпНродрпИ родро░ро╡рпБ родро▒рпНроХро╛ро▓ро┐роХрооро╛роХ роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ"
    },
    "temp_unavailable_text_2": {
        "English": "Please try again in a few moments.",
        "Hindi": "рдХреГрдкрдпрд╛ рдХреБрдЫ рджреЗрд░ рдмрд╛рдж рдлрд┐рд░ рд╕реЗ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред",
        "Marathi": "рдХреГрдкрдпрд╛ рдХрд╛рд╣реА рдХреНрд╖рдгрд╛рдд рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди рдХрд░рд╛ред",
        "Telugu": "р░жр░пр░Ър▒Зр░╕р░┐ р░Хр▒Кр░жр▒Нр░жр░┐р░╕р▒Зр░кр░Яр░┐ р░др░░р▒Нр░╡р░╛р░д р░ор░│р▒Нр░▓р▒А р░кр▒Нр░░р░пр░др▒Нр░ир░┐р░Вр░Ър░Вр░бр░┐ред",
        "Tamil": "родропро╡рпБроЪрпЖропрпНродрпБ роЪро┐ро▒ро┐родрпБ роирпЗро░родрпНродро┐ро▓рпН роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпНред"
    },
    "prices_awaiting_analysis_title": {
        "English": "Market Prices Awaiting Analysis",
        "Hindi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдореЗрдВ рдмрд╛рдЬрд╛рд░ рднрд╛рд╡",
        "Marathi": "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреНрд░рддреАрдХреНрд╖реЗрдд рдмрд╛рдЬрд╛рд░ рднрд╛рд╡",
        "Telugu": "р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░Хр▒Лр░╕р░В р░╡р▒Зр░Ър░┐ р░Йр░ир▒Нр░и р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░зр░░р░▓р▒Б",
        "Tamil": "рокроХрпБрокрпНрокро╛ропрпНро╡рпБроХрпНроХро╛роХроХрпН роХро╛родрпНродро┐ро░рпБроХрпНроХрпБроорпН роЪроирпНродрпИ ро╡ро┐ро▓рпИроХро│рпН"
    },
    "prices_awaiting_analysis_text_1": {
        "English": "Complete crop analysis first to access real-time market prices",
        "Hindi": "рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдХреЗ рдмрд╛рдЬрд╛рд░ рднрд╛рд╡ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рдлрд╕рд▓ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреВрд░рд╛ рдХрд░реЗрдВ",
        "Marathi": "рд╡рд╛рд╕реНрддрд╡рд┐рдХ-рд╡реЗрд│ рдмрд╛рдЬрд╛рд░ рднрд╛рд╡ рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА рдкреНрд░рдердо рдкрд┐рдХрд╛рдЪреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреВрд░реНрдг рдХрд░рд╛",
        "Telugu": "р░ир░┐р░Ь-р░╕р░ор░п р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░зр░░р░▓р░ир▒Б р░пр░╛р░Хр▒Нр░╕р▒Жр░╕р▒Н р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░ор▒Кр░жр░Я р░кр░Вр░Я р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░гр░ир▒Б р░кр▒Вр░░р▒Нр░др░┐ р░Ър▒Зр░пр░Вр░бр░┐",
        "Tamil": "роиро┐роХро┤рпНроирпЗро░ роЪроирпНродрпИ ро╡ро┐ро▓рпИроХро│рпИ роЕрогрпБроХ роорпБродро▓ро┐ро▓рпН рокропро┐ро░рпН рокроХрпБрокрпНрокро╛ропрпНро╡рпИ роорпБроЯро┐роХрпНроХро╡рпБроорпН"
    },
    "prices_awaiting_analysis_text_2": {
        "English": "Real-time mandi prices тАв Price trends тАв Market information",
        "Hindi": "рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдХреЗ рдордВрдбреА рднрд╛рд╡ тАв рдореВрд▓реНрдп рдХреЗ рд░реБрдЭрд╛рди тАв рдмрд╛рдЬрд╛рд░ рдХреА рдЬрд╛рдирдХрд╛рд░реА",
        "Marathi": "рд╡рд╛рд╕реНрддрд╡рд┐рдХ-рд╡реЗрд│ рдмрд╛рдЬрд╛рд░ рднрд╛рд╡ тАв рдХрд┐рдВрдордд рдХрд▓ тАв рдмрд╛рдЬрд╛рд░ рдорд╛рд╣рд┐рддреА",
        "Telugu": "р░ир░┐р░Ь-р░╕р░ор░п р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░зр░░р░▓р▒Б тАв р░зр░░р░▓ р░кр▒Лр░Хр░бр░▓р▒Б тАв р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░╕р░ор░╛р░Ър░╛р░░р░В",
        "Tamil": "роиро┐роХро┤рпНроирпЗро░ роЪроирпНродрпИ ро╡ро┐ро▓рпИроХро│рпН тАв ро╡ро┐ро▓рпИ рокрпЛроХрпНроХрпБроХро│рпН тАв роЪроирпНродрпИ родроХро╡ро▓рпН"
    },
    "searching_mandis": {
        "English": "Searching for nearby mandis...",
        "Hindi": "рдирд┐рдХрдЯрддрдо рдордВрдбрд┐рдпреЛрдВ рдХреА рдЦреЛрдЬ рд╣реЛ рд░рд╣реА рд╣реИ...",
        "Marathi": "рдЬрд╡рд│рдЪреНрдпрд╛ рдордВрдбреНрдпрд╛рдВрдЪрд╛ рд╢реЛрдз рдШреЗрдд рдЖрд╣реЗ...",
        "Telugu": "р░╕р░ор▒Ар░кр░Вр░▓р▒Лр░ир░┐ р░ор░Вр░бр░┐р░▓ р░Хр▒Лр░╕р░В р░╡р▒Жр░др▒Бр░Хр▒Бр░др▒Лр░Вр░жр░┐...",
        "Tamil": "роЕро░рпБроХро┐ро▓рпБро│рпНро│ роорогрпНроЯро┐роХро│рпИродрпН родрпЗроЯрпБроХро┐ро▒родрпБ..."
    },
    "mandis_found": {
        "English": "Found {count} mandis nearby.",
        "Hindi": "рдЖрд╕-рдкрд╛рд╕ {count} рдордВрдбрд┐рдпрд╛рдВ рдорд┐рд▓реАрдВред",
        "Marathi": "рдЬрд╡рд│рдкрд╛рд╕ {count} рдордВрдбреНрдпрд╛ рд╕рд╛рдкрдбрд▓реНрдпрд╛.",
        "Telugu": "р░╕р░ор▒Ар░кр░Вр░▓р▒Л {count} р░ор░Вр░бр░┐р░▓р▒Б р░жр▒Кр░░р░┐р░Хр░╛р░пр░┐.",
        "Tamil": "роЕро░рпБроХро┐ро▓рпН {count} роорогрпНроЯро┐роХро│рпН роХро┐роЯрпИродрпНродрой."
    },
    "no_mandis_found": {
        "English": "Could not find any mandis near your location.",
        "Hindi": "рдЖрдкрдХреЗ рд╕реНрдерд╛рди рдХреЗ рдкрд╛рд╕ рдХреЛрдИ рдордВрдбреА рдирд╣реАрдВ рдорд┐рд▓реАред",
        "Marathi": "рддреБрдордЪреНрдпрд╛ рд╕реНрдерд╛рдирд╛рдЪреНрдпрд╛ рдЬрд╡рд│ рдХреЛрдгрддреАрд╣реА рдордВрдбреА рд╕рд╛рдкрдбрд▓реА рдирд╛рд╣реА.",
        "Telugu": "р░ор▒А р░╕р▒Нр░ер░╛р░ир░В р░жр░Чр▒Нр░Чр░░ р░ор░Вр░бр░┐р░▓р▒Б р░жр▒Кр░░р░Хр░▓р▒Зр░жр▒Бред",
        "Tamil": "роЙроЩрпНроХро│рпН роЗро░рпБрокрпНрокро┐роЯродрпНродро┐ро▒рпНроХрпБ роЕро░рпБроХро┐ро▓рпН роорогрпНроЯро┐роХро│рпН роОродрпБро╡рпБроорпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИред"
    },
    "your_location": {
        "English": "Your Location",
        "Hindi": "рдЖрдкрдХрд╛ рд╕реНрдерд╛рди",
        "Marathi": "рддреБрдордЪреЗ рд╕реНрдерд╛рди",
        "Telugu": "р░ор▒А р░╕р▒Нр░ер░╛р░ир░В",
        "Tamil": "роЙроЩрпНроХро│рпН роЗро░рпБрокрпНрокро┐роЯроорпН"
    },
    "you_are_here": {
        "English": "You are here!",
        "Hindi": "рдЖрдк рдпрд╣рд╛рдВ рд╣реИрдВ!",
        "Marathi": "рддреБрдореНрд╣реА рдпреЗрдереЗ рдЖрд╣рд╛рдд!",
        "Telugu": "р░ор▒Ар░░р▒Б р░Зр░Хр▒Нр░Хр░б р░Йр░ир▒Нр░ир░╛р░░р▒Б!",
        "Tamil": "роирпАроЩрпНроХро│рпН роЗроЩрпНроХрпЗ роЙро│рпНро│рпАро░рпНроХро│рпН!"
    },
    "api_key_error": {
        "English": "API key error: Google Maps API key is missing or invalid. Please check your `.env` file and ensure the Places API is enabled.",
        "Hindi": "рдПрдкреАрдЖрдИ рдХреБрдВрдЬреА рддреНрд░реБрдЯрд┐: Google Maps API рдХреБрдВрдЬреА рдЧреБрдо рд╣реИ рдпрд╛ рдЕрдорд╛рдиреНрдп рд╣реИред рдХреГрдкрдпрд╛ рдЕрдкрдиреА `.env` рдлрд╝рд╛рдЗрд▓ рдЬрд╛рдВрдЪреЗрдВ рдФрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдкреНрд▓реЗрд╕реЗрд╕ рдПрдкреАрдЖрдИ рд╕рдХреНрд╖рдо рд╣реИред",
        "Marathi": "API рдХреА рддреНрд░реБрдЯреА: Google Maps API рдХреА рд╕рд╛рдкрдбрдд рдирд╛рд╣реА рдХрд┐рдВрд╡рд╛ рдЕрд╡реИрдз рдЖрд╣реЗ. рдХреГрдкрдпрд╛ рддреБрдордЪреА `.env` рдлрд╛рдЗрд▓ рддрдкрд╛рд╕рд╛ рдЖрдгрд┐ рдкреНрд▓реЗрд╕реЗрд╕ API рд╕рдХреНрд╖рдо рдЕрд╕рд▓реНрдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛.",
        "Telugu": "API р░Хр▒А р░▓р▒Лр░кр░В: Google Maps API р░Хр▒А р░▓р▒Зр░жр▒Б р░▓р▒Зр░жр░╛ р░Ър▒Жр░▓р▒Нр░▓р░ир░┐р░жр░┐. р░жр░пр░Ър▒Зр░╕р░┐ р░ор▒А `.env` р░лр▒Ир░▓р▒НтАМр░ир░┐ р░др░ир░┐р░Цр▒А р░Ър▒Зр░пр░Вр░бр░┐ р░ор░░р░┐р░пр▒Б р░кр▒Нр░▓р▒Зр░╕р▒Жр░╕р▒Н API р░кр▒Нр░░р░╛р░░р░Вр░нр░┐р░Вр░Ър░мр░бр░┐р░Вр░жр░ир░┐ р░ир░┐р░░р▒Нр░зр░╛р░░р░┐р░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐.",
        "Tamil": "API ро╡ро┐роЪрпИ рокро┐ро┤рпИ: Google Maps API ро╡ро┐роЪрпИ роЗро▓рпНро▓рпИ роЕро▓рпНро▓родрпБ роЪрпЖро▓рпНро▓ро╛родрпБ. роЙроЩрпНроХро│рпН `.env` роХрпЛрокрпНрокрпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН рооро▒рпНро▒рпБроорпН Places API роЪрпЖропро▓рпНрокроЯрпБродрпНродрокрпНрокроЯрпНроЯрпБро│рпНро│родро╛ роОройрпНрокродрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродро╡рпБроорпН."
    },
    "weather_api_error": {
        "English": "Weather API error: {error}. Please check your API key and project settings.",
        "Hindi": "рдореМрд╕рдо рдПрдкреАрдЖрдИ рддреНрд░реБрдЯрд┐: {error}ред рдХреГрдкрдпрд╛ рдЖрдкрд▓реА API рдХреА рдЖрдгрд┐ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рддрдкрд╛рд╕рд╛.",
        "Marathi": "рд╣рд╡рд╛рдорд╛рди API рддреНрд░реБрдЯреА: {error}. рдХреГрдкрдпрд╛ рддреБрдордЪреА API рдХреА рдЖрдгрд┐ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рддрдкрд╛рд╕рд╛.",
        "Telugu": "р░╡р░╛р░др░╛р░╡р░░р░г API р░▓р▒Лр░кр░В: {error}. р░жр░пр░Ър▒Зр░╕р░┐ р░ор▒А API р░Хр▒А р░ор░░р░┐р░пр▒Б р░кр▒Нр░░р░╛р░Ьр▒Жр░Хр▒Нр░Яр▒Н р░╕р▒Жр░Яр▒Нр░Яр░┐р░Вр░Чр▒НтАМр░▓р░ир▒Б р░др░ир░┐р░Цр▒А р░Ър▒Зр░пр░Вр░бр░┐.",
        "Tamil": "ро╡ро╛ройро┐ро▓рпИ API рокро┐ро┤рпИ: {error}. роЙроЩрпНроХро│рпН API ро╡ро┐роЪрпИ рооро▒рпНро▒рпБроорпН родро┐роЯрпНроЯ роЕроорпИрокрпНрокрпБроХро│рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН."
    },
    "predictive_alerts_title": {
        "English": "Predictive Disease Alerts",
        "Hindi": "рднрд╡рд┐рд╖реНрдпрд╕реВрдЪрдХ рд░реЛрдЧ рдЕрд▓рд░реНрдЯ",
        "Marathi": "рднрд╡рд┐рд╖реНрдпрд╕реВрдЪрдХ рд░реЛрдЧ рдЕрд▓рд░реНрдЯ",
        "Telugu": "р░Ер░Вр░Ър░ир░╛ р░╡р▒Нр░пр░╛р░зр░┐ р░╣р▒Жр░Ър▒Нр░Ър░░р░┐р░Хр░▓р▒Б",
        "Tamil": "роорпБройрпНроХрпВроЯрпНроЯро┐роп роирпЛропрпН ро╡ро┐ро┤ро┐рокрпНрокрпВроЯрпНроЯро▓рпНроХро│рпН"
    },
    "predictive_alerts_text": {
        "English": "Analyzing current weather patterns for potential crop disease risks based on your crop analysis...",
        "Hindi": "рдЖрдкрдХреЗ рдлрд╕рд▓ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рдВрднрд╛рд╡рд┐рдд рдлрд╕рд▓ рд░реЛрдЧ рдЬреЛрдЦрд┐рдореЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд░реНрддрдорд╛рди рдореМрд╕рдо рдкреИрдЯрд░реНрди рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг...",
        "Marathi": "рддреБрдордЪреНрдпрд╛ рдкреАрдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдгрд╛рдЪреНрдпрд╛ рдЖрдзрд╛рд░реЗ рд╕рдВрднрд╛рд╡реНрдп рдкреАрдХ рд░реЛрдЧ рдзреЛрдХреНрдпрд╛рдВрд╕рд╛рдареА рд╡рд░реНрддрдорд╛рди рд╣рд╡рд╛рдорд╛рди рдкрджреНрдзрддреАрдВрдЪреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдд рдЖрд╣реЗ...",
        "Telugu": "р░ор▒А р░кр░Вр░Я р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░Жр░зр░╛р░░р░Вр░Чр░╛ р░╕р░Вр░нр░╛р░╡р▒Нр░п р░кр░Вр░Я р░╡р▒Нр░пр░╛р░зр░┐ р░кр▒Нр░░р░ор░╛р░жр░╛р░▓ р░Хр▒Лр░╕р░В р░кр▒Нр░░р░╕р▒Нр░др▒Бр░д р░╡р░╛р░др░╛р░╡р░░р░г р░ир░ор▒Вр░ир░╛р░▓р░ир▒Б р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░┐р░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "роЙроЩрпНроХро│рпН рокропро┐ро░рпН рокроХрпБрокрпНрокро╛ропрпНро╡ро┐ройрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН роЪро╛родрпНродро┐ропрооро╛рой рокропро┐ро░рпН роирпЛропрпН роЕрокро╛ропроЩрпНроХро│рпБроХрпНроХро╛роХ родро▒рпНрокрпЛродрпИроп ро╡ро╛ройро┐ро▓рпИ роорпБро▒рпИроХро│рпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНроХро┐ро▒родрпБ..."
    },
    "no_disease_detected": {
        "English": "тЬЕ No disease was detected in the initial crop analysis. All clear!",
        "Hindi": "тЬЕ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдлрд╕рд▓ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдореЗрдВ рдХреЛрдИ рд░реЛрдЧ рдирд╣реАрдВ рдкрд╛рдпрд╛ рдЧрдпрд╛ред рд╕рдм рдареАрдХ рд╣реИ!",
        "Marathi": "тЬЕ рдкреНрд░рд╛рдердорд┐рдХ рдкреАрдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдгрд╛рдд рдХреЛрдгрддрд╛рд╣реА рд░реЛрдЧ рдЖрдврд│рд▓рд╛ рдирд╛рд╣реА. рд╕рд░реНрд╡ рдХрд╛рд╣реА рдареАрдХ рдЖрд╣реЗ!",
        "Telugu": "тЬЕ р░кр▒Нр░░р░╛р░░р░Вр░н р░кр░Вр░Я р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░гр░▓р▒Л р░П р░╡р▒Нр░пр░╛р░зр░┐ р░Хр░ир▒Бр░Чр▒Кр░ир░мр░бр░▓р▒Зр░жр▒Б. р░Ер░Вр░др░╛ р░╕р▒Нр░кр░╖р▒Нр░Яр░Вр░Чр░╛ р░Йр░Вр░жр░┐!",
        "Tamil": "тЬЕ роЖро░роорпНрок рокропро┐ро░рпН рокроХрпБро╛ропрпНро╡ро┐ро▓рпН роОроирпНрод роирпЛропрпБроорпН роХрогрпНроЯро▒ро┐ропрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ. роОро▓рпНро▓ро╛роорпН родрпЖро│ро┐ро╡ро╛роХ роЙро│рпНро│родрпБ!"
    },
     "generating_prediction": {
        "English": "Generating predictive alert for {disease_name} based on weather...",
        "Hindi": "рдореМрд╕рдо рдХреЗ рдЖрдзрд╛рд░ рдкрд░ {disease_name} рдХреЗ рд▓рд┐рдП рднрд╡рд┐рд╖реНрдп рдХрд╣рдиреЗрд╡рд╛рд▓рд╛ рдЕрд▓рд░реНрдЯ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...",
        "Marathi": "рд╣рд╡рд╛рдорд╛рдирд╛рд╡рд░ рдЖрдзрд╛рд░рд┐рдд {disease_name} рд╕рд╛рдареА рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рд╕реВрдЪрдирд╛ рддрдпрд╛рд░ рдХрд░рдд рдЖрд╣реЗ...",
        "Telugu": "{disease_name} р░Хр▒Лр░╕р░В р░╡р░╛р░др░╛р░╡р░░р░гр░В р░Жр░зр░╛р░░р░Вр░Чр░╛ р░Ер░Вр░Ър░ир░╛ р░╣р▒Жр░Ър▒Нр░Ър░░р░┐р░Хр░ир▒Б р░░р▒Вр░кр▒Кр░Вр░жр░┐р░╕р▒Нр░др▒Лр░Вр░жр░┐...",
        "Tamil": "ро╡ро╛ройро┐ро▓рпИ роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН {disease_name} роХрпНроХро╛рой роорпБройрпНроХрогро┐рокрпНрокрпБ роОроЪрпНроЪро░ро┐роХрпНроХрпИ роЙро░рпБро╡ро╛роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ..."
    },
    "gemini_prediction_header": {
        "English": "ЁЯдЦ Gemini-Powered Prediction",
        "Hindi": "ЁЯдЦ рдЬреЗрдорд┐рдиреА-рд╕рдВрдЪрд╛рд▓рд┐рдд рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА",
        "Marathi": "ЁЯдЦ рдЬреЗрдорд┐рдиреА-рдЪрд╛рд▓рд┐рдд рдЕрдВрджрд╛рдЬ",
        "Telugu": "ЁЯдЦ р░Ьр▒Жр░ор░┐р░ир░┐-р░Жр░зр░╛р░░р░┐р░д р░Ер░Вр░Ър░ир░╛",
        "Tamil": "ЁЯдЦ роЬрпЖрооро┐ройро┐-роЗропроЩрпНроХрпБроорпН роХрогро┐рокрпНрокрпБ"
    }
}


def _(text_key, **kwargs):
    """Translates a text key to the selected language, with formatting."""
    lang = st.session_state.get('language', 'English')
    text = TRANSLATIONS.get(text_key, {}).get(lang, text_key)
    if kwargs:
        text = text.format(**kwargs)
    return text

# --- Enhanced Custom CSS with a Dark, Modern Theme ---
st.markdown("""
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    /* Root variables with deep green and gold theme */
    :root {
        --primary-green: #006400; /* Dark Green */
        --secondary-green: #228B22; /* Forest Green */
        --accent-gold: #FFD700; /* Gold */
        --dark-bg: #0A190A; /* Very Dark Green/Black */
        --light-text: #E0E0E0; /* Light Gray for readability */
        --card-bg: rgba(0, 0, 0, 0.2);
        --success-color: #32CD32;
        --warning-color: #FFD700;
        --error-color: #FF6347;
        --info-color: #87CEEB;
        --white: #FFFFFF;
        --light-gray: #D3D3D3;
        --medium-gray: #A9A9A9;
        --dark-gray: #333333;
        --earth-brown: #DEB887;
        --text-color: #E0E0E0; /* Light text for readability on dark background */
        --dark-green: #004D00; /* Even darker green for contrast */
    }
    
    /* Smooth animations */
    @keyframes slideInUp {
        from {
            transform: translateY(30px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }
    
    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    
    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.02);
        }
    }
    
    @keyframes shimmer {
        0% {
            background-position: -1000px 0;
        }
        100% {
            background-position: 1000px 0;
        }
    }
    
    /* Stunning deep green gradient background */
    .stApp {
        background: linear-gradient(135deg, var(--dark-bg), var(--primary-green));
        background-size: 400% 400%;
        animation: gradientShift 20s ease infinite;
        font-family: 'Inter', sans-serif;
        min-height: 100vh;
        color: var(--text-color);
    }
    
    @keyframes gradientShift {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
    
    /* Enhanced text visibility - light text for dark background */
    h1, h2, h3, h4, h5, h6 {
        color: var(--accent-gold) !important;
        font-family: 'Poppins', sans-serif;
        font-weight: 600;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        margin-bottom: 1rem;
    }
    
    p, span, div, label {
        color: var(--text-color) !important;
        font-weight: 400;
    }

    .stMarkdown p {
        color: var(--light-text) !important;
    }
    
    /* Beautiful cards with subtle shadow and rounded corners */
    .card {
        background: rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 215, 0, 0.3); /* Gold border */
        padding: 2.5rem;
        border-radius: 20px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        margin-bottom: 2rem;
        animation: slideInUp 0.6s ease;
        transition: all 0.3s ease;
        color: var(--text-color);
    }
    
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
    }
    
    /* Farmer-friendly button styling */
    .stButton button {
        padding: 1rem 2.5rem;
        background: linear-gradient(135deg, var(--secondary-green), var(--primary-green));
        color: var(--white);
        border: none;
        border-radius: 25px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
        text-transform: none;
        letter-spacing: 0.5px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    .stButton button:hover:not(:disabled) {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        background: linear-gradient(135deg, var(--primary-green), var(--secondary-green));
    }
    
    .stButton button:active {
        transform: translateY(-1px);
    }
    
    .stButton button:disabled {
        opacity: 0.7;
        cursor: not-allowed;
        transform: none;
    }
    
    /* Enhanced file uploader */
    .stFileUploader {
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 2rem;
        border: 2px dashed var(--secondary-green);
        transition: all 0.3s ease;
        text-align: center;
    }
    
    .stFileUploader:hover {
        border: 2px dashed var(--accent-gold);
        background: rgba(255, 215, 0, 0.1);
        transform: scale(1.01);
    }
    
    /* Enhanced tabs */
    .stTabs [data-baseweb="tab-list"] {
        gap: 0.5rem;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 25px;
        padding: 0.5rem;
        backdrop-filter: blur(10px);
    }
    
    .stTabs [data-baseweb="tab"] {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 20px;
        padding: 0.8rem 1.5rem;
        font-weight: 500;
        color: var(--light-text);
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 215, 0, 0.3);
        font-size: 0.95rem;
    }
    
    .stTabs [data-baseweb="tab"]:hover {
        background: var(--dark-green);
        transform: translateY(-2px);
    }
    
    .stTabs [aria-selected="true"] {
        background: linear-gradient(135deg, var(--secondary-green), var(--primary-green));
        color: var(--white);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transform: translateY(-2px);
    }
    
    /* Beautiful header */
    .app-header {
        background: rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 215, 0, 0.3);
        padding: 2.5rem 2rem;
        border-radius: 25px;
        color: var(--text-color);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        margin-bottom: 2rem;
        animation: slideInUp 0.8s ease;
        text-align: center;
    }
    
    .app-header h1 {
        font-size: 3.5rem;
        margin-bottom: 0.5rem;
        background: linear-gradient(45deg, var(--accent-gold), var(--light-text));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .app-header p {
        font-size: 1.2rem;
        opacity: 0.9;
        font-weight: 400;
        margin-bottom: 0.5rem;
        color: var(--text-color);
    }
    
    /* Enhanced image preview */
    .image-preview {
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        animation: fadeIn 0.6s ease;
    }
    
    .image-preview:hover {
        transform: scale(1.02);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    
    /* Progress bar enhancement */
    .stProgress > div > div > div > div {
        background: linear-gradient(90deg, var(--accent-gold), var(--primary-green));
        border-radius: 10px;
    }
    
    .stProgress > div > div > div {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
    }
    
    /* Radio button styling */
    .stRadio > div {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 15px;
        padding: 1rem;
        backdrop-filter: blur(10px);
    }
    
    /* Checkbox styling */
    .stCheckbox > div {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        padding: 0.5rem;
        backdrop-filter: blur(5px);
    }
    
    /* Success/Info/Warning/Error messages */
    .stSuccess, .stInfo, .stWarning, .stError {
        border-radius: 15px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 215, 0, 0.3);
        animation: slideInUp 0.4s ease;
    }
    
    /* Metric styling */
    .metric-container {
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 1.5rem;
        text-align: center;
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 215, 0, 0.3);
        height: 100%;
    }
    
    .metric-container:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        background: var(--dark-green);
    }
    
    .metric-container h3 {
        font-size: 2.2rem;
        margin-bottom: 0.25rem;
        color: var(--accent-gold) !important;
    }
    
    /* Market Price Card Styling */
    .market-list-container {
        margin-top: 2rem;
    }

    .market-card {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        border-left: 5px solid var(--accent-gold);
        transition: all 0.3s ease-in-out;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    
    .market-card:hover {
        transform: translateX(5px) scale(1.01);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        border-left-color: var(--secondary-green);
    }

    .market-card h4 {
        margin-top: 0;
        margin-bottom: 0.5rem;
        color: var(--accent-gold) !important;
        font-weight: 600;
    }

    .market-card p {
        margin-bottom: 0.25rem;
        font-size: 0.95rem;
        color: var(--light-text) !important;
    }
    
    .price-details {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid rgba(255, 215, 0, 0.2);
    }

    .price-tag {
        background: var(--secondary-green);
        padding: 0.5rem 1rem;
        border-radius: 10px;
        font-weight: 600;
        text-align: center;
        font-size: 1.1rem;
        color: var(--white) !important;
    }

    /* Loading animation */
    .loading-text {
        background: linear-gradient(45deg, var(--accent-gold), var(--primary-green));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 600;
        animation: pulse 1.5s ease-in-out infinite;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
    }
    
    ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
        background: linear-gradient(45deg, var(--secondary-green), var(--primary-green));
        border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(45deg, var(--primary-green), var(--secondary-green));
    }
    
    /* Responsive design */
    @media (max-width: 768px) {
        .app-header h1 {
            font-size: 2.5rem;
        }
        
        .card {
            padding: 1.5rem;
        }
        
        .stButton button {
            padding: 0.8rem 2rem;
            font-size: 1rem;
        }
    }
    
    /* Expander styling */
    .streamlit-expanderHeader {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 215, 0, 0.3);
    }
    
    /* Enhanced empty state styling */
    .empty-state {
        text-align: center;
        padding: 3rem;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 20px;
        border: 2px dashed rgba(255, 215, 0, 0.3);
        animation: fadeIn 0.6s ease;
    }
    
    .empty-state-icon {
        font-size: 4rem;
        margin-bottom: 1.5rem;
        opacity: 0.8;
    }

    .language-dropdown {
        position: absolute;
        top: 2rem;
        right: 2rem;
        width: 150px;
        z-index: 10;
    }
</style>
""", unsafe_allow_html=True)


# --- Functions for Backend Logic ---

def get_gemini_content(prompt_input, img_data=None):
    """Generates a response from the Gemini model."""
    model = genai.GenerativeModel('gemini-1.5-flash-latest')
    if img_data:
        response = model.generate_content([img_data, prompt_input])
    else:
        response = model.generate_content(prompt_input)
    return response.text

def input_img_bytes(uploaded_file):
    """Converts an uploaded file to a format suitable for the Gemini API."""
    if uploaded_file is not None:
        image_data = {
            'mime_type': uploaded_file.type,
            'data': uploaded_file.getvalue()
        }
        return image_data
    raise FileNotFoundError("File is not uploaded.")

def get_mandi_prices(crop_name):
    """Fetches mandi prices using Government of India's Agmarknet API with fallback options."""
    
    # Common crop name mappings for the API
    crop_mappings = {
        'wheat': 'Wheat',
        'rice': 'Paddy(Dhan)(Common)',
        'paddy': 'Paddy(Dhan)(Common)',
        'corn': 'Maize',
        'maize': 'Maize',
        'cotton': 'Cotton',
        'sugarcane': 'Sugarcane',
        'tomato': 'Tomato',
        'potato': 'Potato',
        'onion': 'Onion',
        'soybean': 'Soyabean',
        'groundnut': 'Groundnut',
        'mustard': 'Mustard',
        'chili': 'Chili Red',
        'turmeric': 'Turmeric',
        'onion': 'Onion',
        'gram': 'Gram',
        'bajra': 'Bajra',
        'jowar': 'Jowar(Hybrid)',
        'moong': 'Moong(Green Gram)',
    }
    
    # Try different variations of the crop name
    crop_variations = [
        crop_name,
        crop_name.lower(),
        crop_name.capitalize(),
        crop_mappings.get(crop_name.lower(), crop_name)
    ]
    
    # Multiple API endpoints to try
    api_endpoints = [
        {
            'url': "https://api.data.gov.in/resource/9ef84268-d588-465a-a308-a864a43d0070",
            'key': DATA_GOV_IN_API_KEY
        },
        {
            'url': "https://api.data.gov.in/resource/35985678-0d79-46b4-9ed6-6f13308a1d24", 
            'key': DATA_GOV_IN_API_KEY
        }
    ]
    
    for endpoint in api_endpoints:
        if not endpoint['key']:
            continue
            
        for crop_variant in crop_variations:
            try:
                params = {
                    "api-key": endpoint['key'],
                    "format": "json",
                    "filters[commodity]": crop_variant,
                    "limit": 15,
                }
                
                response = requests.get(endpoint['url'], params=params, timeout=10)
                response.raise_for_status()
                
                data = response.json()
                
                if data.get("records") and len(data["records"]) > 0:
                    return data
                    
            except requests.exceptions.RequestException as e:
                st.write(f"API Error for {crop_variant}: {str(e)}")
                continue
            except Exception as e:
                st.write(f"General Error for {crop_variant}: {str(e)}")
                continue
    
    # If all APIs fail, return mock data for demonstration
    st.warning("Live market data unavailable. Showing sample data for demonstration.")
    return generate_mock_market_data(crop_name)

def generate_mock_market_data(crop_name):
    """Generate mock market data when API is unavailable."""
    import random
    from datetime import datetime, timedelta
    
    # Base prices for different crops (in INR per quintal)
    base_prices = {
        'wheat': 2200,
        'rice': 2800,
        'paddy': 2800,
        'corn': 2000,
        'maize': 2000,
        'cotton': 5500,
        'tomato': 1200,
        'potato': 800,
        'onion': 1500,
        'soybean': 4200,
        'mustard': 5800,
    }
    
    base_price = base_prices.get(crop_name.lower(), 2500)
    
    markets = [
        {'market': 'Delhi', 'state': 'Delhi', 'district': 'New Delhi'},
        {'market': 'Mumbai', 'state': 'Maharashtra', 'district': 'Mumbai'},
        {'market': 'Bangalore', 'state': 'Karnataka', 'district': 'Bangalore'},
        {'market': 'Chennai', 'state': 'Tamil Nadu', 'district': 'Chennai'},
        {'market': 'Hyderabad', 'state': 'Telangana', 'district': 'Hyderabad'},
        {'market': 'Pune', 'state': 'Maharashtra', 'district': 'Pune'},
    ]
    
    records = []
    for market_info in markets:
        # Generate realistic price variations
        price_variation = random.randint(-300, 400)
        modal_price = base_price + price_variation
        min_price = modal_price - random.randint(50, 150)
        max_price = modal_price + random.randint(50, 200)
        
        record = {
            'state': market_info['state'],
            'district': market_info['district'],
            'market': market_info['market'],
            'commodity': crop_name.capitalize(),
            'variety': 'Common',
            'modal_price': str(modal_price),
            'min_price': str(min_price),
            'max_price': str(max_price),
            'arrival_date': (datetime.now() - timedelta(days=random.randint(0, 3))).strftime('%d-%m-%Y')
        }
        records.append(record)
    
    return {'records': records}

def translate_text(text, target_language):
    """Translates text to the target language using the Gemini API."""
    model = genai.GenerativeModel('gemini-1.5-flash-latest')
    prompt = f"Translate the following text to {target_language}. Maintain the formatting and structure:\n\n{text}"
    response = model.generate_content(prompt)
    return response.text

def translate_ui_elements(target_language):
    """Translates UI elements using Gemini API for better accuracy."""
    if target_language == "English":
        return {}
    
    # Create a comprehensive prompt for UI translation
    ui_elements = {
        "Markets": "Markets",
        "Price (тВ╣/Quintal)": "Price (тВ╣/Quintal)",
        "Unknown Market": "Unknown Market",
        "N/A": "N/A",
        "Quintal": "Quintal"
    }
    
    model = genai.GenerativeModel('gemini-1.5-flash-latest')
    for key, value in ui_elements.items():
        try:
            prompt = f"Translate this UI element to {target_language}: '{value}'"
            response = model.generate_content(prompt)
            ui_elements[key] = response.text.strip()
        except:
            pass  # Keep original if translation fails
    
    return ui_elements

def create_price_chart(price_data):
    """Creates an animated price chart."""
    if not price_data or not price_data.get('records'):
        return None
    
    records = price_data['records'][:10]
    
    # Get translated UI elements
    lang = st.session_state.get('language', 'English')
    ui_translations = translate_ui_elements(lang) if lang != "English" else {}
    
    markets = [record.get('market', ui_translations.get('Unknown Market', 'Unknown Market')) for record in records]
    prices = [float(record.get('modal_price', 0)) for record in records]
    
    fig = go.Figure(data=[
        go.Bar(
            x=markets,
            y=prices,
            marker_color=['#FFD700', '#228B22', '#006400', '#32CD32', '#F0E68C'] * 2,
            hovertemplate=f'<b>%{{x}}</b><br>{_("modal_price")}: тВ╣%{{y}}/{ui_translations.get("Quintal", "Quintal")}<extra></extra>',
            text=[f'тВ╣{price}' for price in prices],
            textposition='auto',
        )
    ])
    
    market_label = ui_translations.get("Markets", "Markets") if lang != "English" else "Markets"
    price_label = ui_translations.get("Price (тВ╣/Quintal)", "Price (тВ╣/Quintal)") if lang != "English" else "Price (тВ╣/Quintal)"
    
    fig.update_layout(
        title={
            'text': _("price_chart_title"),
            'x': 0.5,
            'font': {'size': 20, 'color': '#FFD700'} # Gold color
        },
        xaxis_title=market_label,
        yaxis_title=price_label,
        paper_bgcolor='rgba(0,0,0,0)',
        plot_bgcolor='rgba(0,0,0,0)',
        font=dict(color='#E0E0E0'), # Light gray text
        xaxis=dict(tickangle=45),
        showlegend=False,
        height=500
    )
    
    return fig

# --- FIXED: Function to get weather data from OpenWeatherMap API ---
def get_weather_data(latitude, longitude):
    """Fetches current weather data from OpenWeatherMap API."""
    # Add validation to prevent requests with None coordinates
    if latitude is None or longitude is None:
        st.error("Location coordinates are missing. Cannot fetch weather data.")
        return None

    if not OPENWEATHERMAP_API_KEY:
        st.error("OpenWeatherMap API key not found. Please set `OPENWEATHERMAP_API_KEY` in your .env file.")
        return None
    
    url = "https://api.openweathermap.org/data/2.5/weather"
    
    params = {
        'lat': latitude,
        'lon': longitude,
        'appid': OPENWEATHERMAP_API_KEY,
        'units': 'metric'
    }
    
    try:
        response = requests.get(url, params=params)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as e:
        st.error(f"Error fetching weather data: {e}")
        return None

# --- NEW: Gemini-powered predictive alert function ---
def get_gemini_disease_prediction(crop, disease, weather, location):
    """
    Generates a predictive disease alert using Gemini based on weather data.
    """
    if not weather:
        return "Weather data is unavailable for prediction."

    weather_summary = (
        f"Temperature: {weather['main']['temp']}┬░C, "
        f"Humidity: {weather['main']['humidity']}%, "
        f"Condition: {weather['weather'][0]['description']}"
    )

    prompt = f"""
    As an expert agricultural AI, analyze the following situation and provide a predictive alert for a farmer.

    **Situation:**
    - **Crop:** {crop}
    - **Previously Detected Disease:** {disease}
    - **Current Location:** {location}
    - **Current Weather:** {weather_summary}

    **Task:**
    1.  Based on the current weather, predict the risk of the detected disease spreading or worsening in the next 48 hours.
    2.  Assign a clear risk level: **Low**, **Medium**, or **High**.
    3.  If the risk is **Medium** or **High**, provide 3-4 concise, actionable, and urgent preventative measures the farmer should take immediately.
    4.  If the risk is **Low**, state that conditions are not favorable for the disease and recommend continued monitoring.

    **Output Format (Strict):**
    Use markdown. Start with the risk level on its own line, followed by a short explanation. Then, if applicable, provide the urgent actions under a "### Urgent Actions" heading.

    **Example for High Risk:**
    ###  High Risk ЁЯМбя╕П
    The current warm and highly humid conditions are ideal for the rapid spread of {disease}.

    ### Urgent Actions
    - **Action 1:** Detailed, specific action.
    - **Action 2:** Detailed, specific action.
    - **Action 3:** Detailed, specific action.

    **Example for Low Risk:**
    ### Low Risk тЬЕ
    The current weather conditions are not favorable for the spread of {disease}. Continue to monitor your crops daily.
    """
    
    prediction = get_gemini_content(prompt)
    return prediction


def find_nearest_mandis(latitude, longitude):
    """Finds nearest mandis using Google Places API - Nearby Search."""
    if not GOOGLE_MAPS_API_KEY:
        st.warning(_("api_key_error"))
        return None
        
    url = "https://maps.googleapis.com/maps/api/place/nearbysearch/json"
    
    params = {
        'location': f"{latitude},{longitude}",
        'radius': 50000,  # 50km in meters, max radius for Nearby Search is 50,000m
        'keyword': 'agricultural market OR mandi',
        'key': GOOGLE_MAPS_API_KEY
    }
    
    try:
        response = requests.get(url, params=params)
        response.raise_for_status()
        data = response.json()
        
        # Check for specific API errors
        if data.get('status') == 'REQUEST_DENIED':
            st.error(f"Google Places API Error: {data.get('error_message', 'Request Denied. Please check your API key and billing settings in Google Cloud Console.')}")
            return None
        
        if data.get('status') == 'OK' and data.get('results'):
            mandis = []
            for place in data['results']:
                mandis.append({
                    'name': place.get('name', 'Unknown Mandi'),
                    'lat': place['geometry']['location']['lat'],
                    'lon': place['geometry']['location']['lng']
                })
            return mandis
        else:
            # Provide more specific feedback if no results are found
            st.warning(f"Google Places API response status: {data.get('status')}. This might mean no mandis were found within the search radius.")
            return None
    except requests.exceptions.RequestException as e:
        st.error(f"Error fetching mandis from Google Places API: {e}")
        return None

# --- Function to generate the HTML map component ---
def generate_google_map_html(center_lat, center_lon, markers):
    markers_json = json.dumps(markers)
    # The HTML code is a single string that's passed to Streamlit's components.html
    return f"""
    <!DOCTYPE html>
    <html>
    <head>
        <title>Google Map</title>
        <style>
            #map {{
                height: 500px;
                width: 100%;
            }}
        </style>
    </head>
    <body>
        <div id="map"></div>
        <script>
            function initMap() {{
                const center = {{ lat: {center_lat}, lng: {center_lon} }};
                const map = new google.maps.Map(document.getElementById("map"), {{
                    zoom: 10,
                    center: center,
                }});
                
                // Add center marker
                new google.maps.Marker({{
                    position: center,
                    map: map,
                    title: "Your Location",
                    icon: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png"
                }});
                
                const markers = {markers_json};
                
                markers.forEach(mandi => {{
                    const marker = new google.maps.Marker({{
                        position: {{ lat: mandi.lat, lng: mandi.lng }},
                        map: map,
                        title: mandi.name
                    }});
                }});
            }}
        </script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key={GOOGLE_MAPS_API_KEY}&callback=initMap"></script>
    </body>
    </html>
    """
    
# --- Initialize Session State ---
if 'gemini_response_json' not in st.session_state:
    st.session_state.gemini_response_json = None
if 'language' not in st.session_state:
    st.session_state.language = 'English'
if 'translated_data' not in st.session_state:
    st.session_state.translated_data = None
if 'mandi_prices' not in st.session_state:
    st.session_state.mandi_prices = None
if 'uploaded_image' not in st.session_state:
    st.session_state.uploaded_image = None
if 'is_analyzing' not in st.session_state:
    st.session_state.is_analyzing = False
if 'is_translating' not in st.session_state:
    st.session_state.is_translating = False
if 'gemini_response' not in st.session_state:
    st.session_state.gemini_response = None
if 'translated_response' not in st.session_state:
    st.session_state.translated_response = None
if 'active_tab' not in st.session_state:
    st.session_state.active_tab = 0
if 'auto_redirect' not in st.session_state:
    st.session_state.auto_redirect = False
if 'user_lat' not in st.session_state:
    st.session_state.user_lat = 19.0760 # Default to Mumbai
if 'user_lon' not in st.session_state:
    st.session_state.user_lon = 72.8777 # Default to Mumbai
if 'location_set' not in st.session_state:
    st.session_state.location_set = False


# --- UI Layout ---

# Automatic geolocation pop-up on first load
if not st.session_state.location_set:
    st.markdown("<div style='display:none'>", unsafe_allow_html=True)
    user_location = streamlit_geolocation()
    st.markdown("</div>", unsafe_allow_html=True)

    if user_location and user_location.get('latitude') is not None:
        st.session_state.user_lat = user_location['latitude']
        st.session_state.user_lon = user_location['longitude']
        st.session_state.location_set = True
        st.rerun()

# Header with a dedicated column for language selection
header_col1, header_col2 = st.columns([0.8, 0.2])

with header_col1:
    st.markdown(f"""
    <div class="app-header">
        <h1>ЁЯМ▒ {_("app_name")}</h1>
        <p>{_("app_slogan_1")}</p>
        <p style="font-size: 1rem; opacity: 0.8;">{_("app_slogan_2")}</p>
    </div>
    """, unsafe_allow_html=True)

with header_col2:
    st.markdown("<div class='language-dropdown'>", unsafe_allow_html=True)
    st.markdown(f"**ЁЯМР {_('select_language')}**")
    lang_options = {
        "English": "ЁЯЗ║ЁЯЗ╕ English",
        "Hindi": "ЁЯЗоЁЯЗ│ рд╣рд┐рдВрджреА",
        "Marathi": "ЁЯЗоЁЯЗ│ рдорд░рд╛рдареА",
        "Telugu": "ЁЯЗоЁЯЗ│ р░др▒Жр░▓р▒Бр░Чр▒Б",
        "Tamil": "ЁЯЗоЁЯЗ│ родрооро┐ро┤рпН"
    }
    selected_lang = st.selectbox(
        "Select Language",
        options=list(lang_options.keys()),
        index=list(lang_options.keys()).index(st.session_state.language),
        format_func=lambda x: lang_options[x],
        label_visibility="collapsed"
    )

    if st.session_state.language != selected_lang:
        st.session_state.language = selected_lang
        st.session_state.translated_response = None
        st.rerun()
    st.markdown("</div>", unsafe_allow_html=True)


# Enhanced tabs with automatic redirection
tab_names = [
    f"ЁЯУд {_('tab_upload')}",
    f"ЁЯФН {_('tab_results')}",
    f"ЁЯУК {_('tab_prices')}",
    f"ЁЯУН {_('tab_mandi')}",
    f"ЁЯЪи {_('tab_alerts')}"
]

# Handle auto-redirect to results tab
if st.session_state.auto_redirect and st.session_state.gemini_response:
    st.session_state.active_tab = 1
    st.session_state.auto_redirect = False

# Create tabs with proper indexing
tabs = st.tabs(tab_names)

with tabs[0]:
    st.markdown('<div class="card">', unsafe_allow_html=True)
    
    col1, col2 = st.columns([1, 1])
    
    with col1:
        st.markdown(f"### ЁЯУ╕ {_('upload_image')}")
        
        # Enhanced file uploader
        uploaded_file = st.file_uploader(
            _("choose_file"), 
            type=['jpg', 'jpeg', 'png'], 
            key="uploader",
            help=_("uploader_help"),
            label_visibility="collapsed"
        )
        
        if uploaded_file:
            st.session_state.uploaded_image = Image.open(uploaded_file)
            
        # Enhancement options
        st.markdown(f"### тЪЩя╕П {_('processing_options')}")
        
        col_opt1, col_opt2 = st.columns(2)
        with col_opt1:
            enhance_option = st.checkbox(f"ЁЯФз {_('enhance_image')}", value=True)
        with col_opt2:
            detailed_analysis = st.checkbox(f"ЁЯФм {_('detailed_analysis')}", value=True)
        
        # Analyze button with enhanced styling
        if uploaded_file:
            if st.button(
                f"ЁЯЪА {_('analyze_button')}", 
                type="primary", 
                disabled=st.session_state.is_analyzing,
                help=_("analyze_help"),
                use_container_width=True
            ):
                st.session_state.is_analyzing = True
                st.rerun()
        else:
            st.markdown(f"""
            <div class="empty-state">
                <div class="empty-state-icon">ЁЯУБ</div>
                <p style="font-size: 1.1rem;">{_("upload_to_begin")}</p>
            </div>
            """, unsafe_allow_html=True)
    
    with col2:
        if uploaded_file and st.session_state.uploaded_image:
            st.markdown(f"### ЁЯЦ╝я╕П {_('image_preview')}")
            
            st.markdown('<div class="image-preview">', unsafe_allow_html=True)
            st.image(
                st.session_state.uploaded_image, 
                caption=_("selected_crop_image"),
                use_container_width=True,
                clamp=True
            )
            st.markdown('</div>', unsafe_allow_html=True)
            
            # Image info with beautiful styling
            img_info = f"""
            <div style="background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 15px; margin-top: 1rem; backdrop-filter: blur(10px); color: var(--text-color);">
                <p><strong>ЁЯУП {_("image_info_dim")}</strong> {st.session_state.uploaded_image.size[0]} x {st.session_state.uploaded_image.size[1]}</p>
                <p><strong>ЁЯУБ {_("image_info_format")}</strong> {st.session_state.uploaded_image.format}</p>
                <p><strong>ЁЯУК {_("image_info_size")}</strong> {len(uploaded_file.getvalue()) / 1024:.1f} KB</p>
            </div>
            """
            st.markdown(img_info, unsafe_allow_html=True)
        else:
            st.markdown(f"""
            <div class="empty-state">
                <div class="empty-state-icon">ЁЯУ╖</div>
                <p style="font-size: 1.2rem;">{_("preview_placeholder_1")}</p>
                <p style="opacity: 0.7;">{_("preview_placeholder_2")}</p>
            </div>
            """, unsafe_allow_html=True)
    
    # Enhanced analysis process with auto-redirect
    if st.session_state.is_analyzing and uploaded_file:
        st.markdown("---")
        st.markdown(f"### ЁЯФД {_('analysis_progress')}")
        
        progress_container = st.container()
        with progress_container:
            progress_bar = st.progress(0)
            status_text = st.empty()
            
            steps = [
                _("step_1"), _("step_2"), _("step_3"),
                _("step_4"), _("step_5"), _("step_6")
            ]
            
            for i, step in enumerate(steps):
                for j in range(17):
                    progress = min((i * 17 + j), 99)
                    progress_bar.progress(progress + 1)
                    status_text.markdown(f'<p class="loading-text">{step} {progress + 1}%</p>', 
                                         unsafe_allow_html=True)
                    time.sleep(0.1)
        
        # Enhanced system instruction for better analysis
        system_instruction = f"""
        You are an expert agricultural AI assistant. Analyze this crop image and provide a comprehensive analysis in well-formatted markdown. 
        
        Structure your response with clear headings and include:
        
        # ЁЯМ╛ Crop Identification
        - **Crop name:** [Your Answer]
        
        # ЁЯФН Health Assessment  
        - **Overall condition:** [Your Answer]
        
        # ЁЯжа Disease/Pest Detection
        - **Detected issue:** [Name of disease/pest, or "None"]
        
        # ЁЯТК Treatment Recommendations
        - [Your recommendations]
        
        # ЁЯЫбя╕П Prevention Tips
        - [Your tips]
        """
        
        try:
            image_data = input_img_bytes(uploaded_file)
            gemini_response = get_gemini_content(system_instruction, image_data)
            
            st.session_state.gemini_response = gemini_response
            st.session_state.translated_response = None
            st.session_state.mandi_prices = None
            st.session_state.is_analyzing = False
            
            progress_bar.progress(100)
            status_text.markdown(f'<p class="loading-text">тЬЕ {_("analysis_complete")} 100%</p>', 
                                 unsafe_allow_html=True)
            
            time.sleep(1)
            
            st.success(_("success_message"))
            
            st.session_state.auto_redirect = True
            time.sleep(2)
            st.rerun()

        except Exception as e:
            status_text.markdown(f'<p style="color: #ff6b6b;">тЭМ {_("analysis_failed", error=str(e))}</p>', 
                                 unsafe_allow_html=True)
            st.session_state.is_analyzing = False
    
    st.markdown('</div>', unsafe_allow_html=True)

with tabs[1]:
    st.markdown('<div class="card">', unsafe_allow_html=True)
    
    if st.session_state.gemini_response:
        if st.session_state.language != "English":
            if not st.session_state.translated_response:
                with st.spinner(f"ЁЯМР {_('translating_text', language=st.session_state.language)}"):
                    try:
                        st.session_state.translated_response = translate_text(
                            st.session_state.gemini_response, 
                            st.session_state.language
                        )
                    except Exception as e:
                        st.error(f"Translation failed: {str(e)}")
                        st.session_state.translated_response = st.session_state.gemini_response
        else:
            st.session_state.translated_response = st.session_state.gemini_response
        
        st.markdown(f"### ЁЯУЛ {_('analysis_results_title')}")
        st.markdown(st.session_state.translated_response, unsafe_allow_html=True)
        
        st.markdown(f"### тЪб {_('quick_actions')}")
        col_action1, col_action2, col_action3 = st.columns(3)
        
        with col_action1:
            if st.button(f"ЁЯУе {_('download_report')}", help=_("download_help"), use_container_width=True):
                report_content = st.session_state.translated_response
                st.download_button("Download PDF", report_content.encode('utf-8'), "crop_analysis_report.pdf", "application/pdf")
                st.success(_("download_success"))
        
        with col_action2:
            if st.button(f"ЁЯФД {_('re_analyze')}", help=_("re_analyze_help"), use_container_width=True):
                st.session_state.is_analyzing = True
                st.session_state.active_tab = 0
                st.rerun()
        
        with col_action3:
            if st.button(f"ЁЯТ╛ {_('save_to_history')}", help="Save analysis to history", use_container_width=True):
                st.session_state.history = st.session_state.get('history', []) + [{'timestamp': datetime.now().strftime('%Y-%m-%d %H:%M:%S'), 'image': st.session_state.uploaded_image, 'analysis': st.session_state.translated_response}]
                st.success(_("save_success"))
    
    else:
        st.markdown(f"""
        <div class="empty-state">
            <div class="empty-state-icon">ЁЯФН</div>
            <h3>{_('no_analysis_title')}</h3>
            <p>{_('no_analysis_text_1')}</p>
            <p style="opacity: 0.7;">{_('no_analysis_text_2')}</p>
        </div>
        """, unsafe_allow_html=True)
    
    st.markdown('</div>', unsafe_allow_html=True)

with tabs[2]:
    st.markdown('<div class="card">', unsafe_allow_html=True)
    
    if st.session_state.gemini_response:
        try:
            crop_match = re.search(r'Crop name:\s*(.*)', st.session_state.gemini_response, re.IGNORECASE)
            crop_name = crop_match.group(1).strip() if crop_match else "Unknown Crop"
        except:
            crop_name = "Unknown Crop"
        
        st.markdown(f"### ЁЯУИ {_('market_prices_title')}")
        st.markdown(f"**{_('market_data_for', crop=crop_name)}**")
        
        if not st.session_state.mandi_prices:
            with st.spinner(f"тП│ {_('fetching_prices')}"):
                try:
                    st.session_state.mandi_prices = get_mandi_prices(crop_name)
                except Exception as e:
                    st.error(_("error_fetching_market_data", error=str(e)))
                    st.session_state.mandi_prices = None
        
        if st.session_state.mandi_prices and st.session_state.mandi_prices.get('records'):
            records = st.session_state.mandi_prices['records']
            
            prices = [float(record.get('modal_price', 0)) for record in records if record.get('modal_price')]
            avg_price = sum(prices) / len(prices) if prices else 0
            high_price = max(prices) if prices else 0
            low_price = min(prices) if prices else 0
            
            st.markdown(f"### ЁЯУК {_('market_overview')}")
            col_metric1, col_metric2, col_metric3 = st.columns(3)
            
            with col_metric1:
                st.markdown(f"""<div class="metric-container"><p style="font-size: 1.1rem; color: var(--text-color);">ЁЯУЙ {_('min_price')}</p><h3 style="color: var(--error-color);">тВ╣{low_price:.2f}</h3><p style="opacity: 0.7; color: var(--light-text);">{_('avg_price_help')}</p></div>""", unsafe_allow_html=True)
            with col_metric2:
                st.markdown(f"""<div class="metric-container"><p style="font-size: 1.1rem; color: var(--text-color);">{_('avg_price')}</p><h3 style="color: var(--warning-color);">тВ╣{avg_price:.2f}</h3><p style="opacity: 0.7; color: var(--light-text);">{_('avg_price_help')}</p></div>""", unsafe_allow_html=True)
            with col_metric3:
                st.markdown(f"""<div class="metric-container"><p style="font-size: 1.1rem; color: var(--text-color);">ЁЯУИ {_('max_price')}</p><h3 style="color: var(--success-color);">тВ╣{high_price:.2f}</h3><p style="opacity: 0.7; color: var(--light-text);">{_('avg_price_help')}</p></div>""", unsafe_allow_html=True)

            st.markdown("<br>", unsafe_allow_html=True)
            
            price_chart = create_price_chart(st.session_state.mandi_prices)
            if price_chart:
                st.plotly_chart(price_chart, use_container_width=True)
            
            st.markdown(f"### ЁЯУЛ {_('market_info_title')}")
            
            st.markdown('<div class="market-list-container">', unsafe_allow_html=True)
            for record in records[:5]:
                st.markdown(f"""<div class="market-card"><h4>{record.get('market', 'Unknown')} - <span style="font-weight: 400; opacity: 0.8; color: var(--light-text) !important;">{record.get('state', 'N/A')}</span></h4><p><strong>{_('commodity')}:</strong> {record.get('commodity', 'N/A')} ({record.get('variety', 'N/A')})</p><div class="price-details"><div><p><strong>{_('min_price')}:</strong> тВ╣{record.get('min_price', 'N/A')}</p><p><strong>{_('max_price')}:</strong> тВ╣{record.get('max_price', 'N/A')}</p></div><div class="price-tag">{_('modal_price')}<br>тВ╣{record.get('modal_price', 'N/A')}</div></div></div>""", unsafe_allow_html=True)
            st.markdown('</div>', unsafe_allow_html=True)

        else:
            st.markdown(f"""<div class="empty-state"><div class="empty-state-icon">ЁЯУЙ</div><h3>{_('no_market_data', crop_name=crop_name)}</h3><p>{_('api_unavailable_1')}</p><p style="opacity: 0.7;">{_('api_unavailable_2')}</p></div>""", unsafe_allow_html=True)
    
    else:
        st.markdown(f"""<div class="empty-state"><div class="empty-state-icon">ЁЯУК</div><h3>{_('prices_awaiting_analysis_title')}</h3><p>{_('prices_awaiting_analysis_text_1')}</p><p style="opacity: 0.7;">{_('prices_awaiting_analysis_text_2')}</p></div>""", unsafe_allow_html=True)
    
    st.markdown('</div>', unsafe_allow_html=True)

with tabs[3]:
    st.markdown('<div class="card">', unsafe_allow_html=True)
    st.markdown(f"### ЁЯУН {_('tab_mandi')}")

    with st.spinner(_("searching_mandis")):
        mandis = find_nearest_mandis(st.session_state.user_lat, st.session_state.user_lon)
        
        if mandis:
            st.success(_("mandis_found", count=len(mandis)))
            map_markers = [{"lat": m['lat'], "lng": m['lon'], "name": m['name']} for m in mandis]
            map_html = generate_google_map_html(st.session_state.user_lat, st.session_state.user_lon, map_markers)
            components.html(map_html, height=500)
        else:
            # The function find_nearest_mandis now shows specific errors
            pass

    st.markdown('</div>', unsafe_allow_html=True)

with tabs[4]:
    st.markdown('<div class="card">', unsafe_allow_html=True)
    st.markdown(f"### ЁЯЪи {_('predictive_alerts_title')}")

    if st.session_state.gemini_response:
        try:
            crop_match = re.search(r'Crop name:\s*(.*)', st.session_state.gemini_response, re.IGNORECASE)
            disease_match = re.search(r'Detected issue:\s*(.*)', st.session_state.gemini_response, re.IGNORECASE)
            
            crop_name = crop_match.group(1).strip() if crop_match else "Unknown Crop"
            disease_name = disease_match.group(1).strip() if disease_match else "None"

            st.markdown(f"<p style='text-align: center; color: var(--text-color); opacity: 0.7;'>{_('predictive_alerts_text')}</p>", unsafe_allow_html=True)
            st.markdown("<hr>", unsafe_allow_html=True)
            
            if disease_name.lower() != 'none' and disease_name:
                weather_data = get_weather_data(st.session_state.user_lat, st.session_state.user_lon)
                
                if weather_data:
                    st.markdown("#### Current Weather Conditions")
                    col_w1, col_w2, col_w3 = st.columns(3)
                    with col_w1:
                        st.metric(label="Temperature", value=f"{weather_data['main']['temp']} ┬░C")
                    with col_w2:
                        st.metric(label="Humidity", value=f"{weather_data['main']['humidity']}%")
                    with col_w3:
                        st.metric(label="Condition", value=weather_data['weather'][0]['description'].title())
                    st.markdown("<hr>", unsafe_allow_html=True)

                    with st.spinner(_('generating_prediction', disease_name=disease_name)):
                        # Using a generic location name for privacy in the prompt
                        prediction_response = get_gemini_disease_prediction(crop_name, disease_name, weather_data, "the user's region")
                        
                        # Translate the prediction if needed
                        if st.session_state.language != "English":
                            prediction_response = translate_text(prediction_response, st.session_state.language)
                        
                        st.markdown(f"### {_('gemini_prediction_header')}")
                        st.markdown(prediction_response, unsafe_allow_html=True)
                else:
                    st.warning("Could not fetch weather data to run predictive analysis.")
            else:
                st.success(_('no_disease_detected'))
        except Exception as e:
            st.error(f"An error occurred while generating the prediction: {e}")
    else:
        st.info("Please complete crop analysis first to enable predictive alerts.")

    st.markdown('</div>', unsafe_allow_html=True)


# Footer
st.markdown("""
<div style="text-align: center; padding: 2rem 0; color: var(--text-color); opacity: 0.7;">
    <p>ЁЯМ▒ AgroSnap - Powered by Google Gemini AI</p>
    <p>Supporting farmers with real-time crop analysis and market insights</p>
</div>
""", unsafe_allow_html=True)